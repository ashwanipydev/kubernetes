<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K8s Mastery Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        stone: {
                            850: '#211f1d',
                            950: '#0c0a09',
                        },
                        sky: {
                            950: '#082f49',
                        }
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s ease-in-out infinite',
                        'float': 'float 6s ease-in-out infinite',
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #e7e5e4; 
        }
        .dark ::-webkit-scrollbar-track {
            background: #292524;
        }
        ::-webkit-scrollbar-thumb {
            background: #a8a29e; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #78716c; 
        }

        .chart-container {
            position: relative;
            width: 100%;
            height: 300px;
        }
        
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        .tab-active {
            border-bottom: 2px solid #0284c7;
            color: #0284c7;
            font-weight: 600;
        }

        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .terminal-window {
            background-color: #1e1e1e;
            color: #d4d4d4;
            border-radius: 8px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
        }

        .animate-fade-in {
            animation: fadeIn 0.4s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .gradient-bg {
            background: linear-gradient(135deg, #0ea5e9 0%, #6366f1 100%);
        }

        .ai-chat-bubble {
            border-radius: 18px 18px 18px 4px;
            max-width: 80%;
        }

        .user-chat-bubble {
            border-radius: 18px 18px 4px 18px;
            max-width: 80%;
            margin-left: auto;
        }

        .concept-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
        }

        .dark .concept-card {
            background: linear-gradient(145deg, #1c1917 0%, #292524 100%);
        }

        .pulse-ring {
            animation: pulse-ring 2s cubic-bezier(0.215, 0.610, 0.355, 1) infinite;
        }

        @keyframes pulse-ring {
            0% { transform: scale(0.8); opacity: 0.8; }
            80%, 100% { transform: scale(1.5); opacity: 0; }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col bg-stone-50 text-stone-900 dark:bg-stone-950 dark:text-stone-100">

    <!-- Navigation Bar -->
    <nav class="bg-white dark:bg-stone-900 border-b border-stone-200 dark:border-stone-800 sticky top-0 z-50 transition-colors">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center cursor-pointer overflow-hidden" onclick="renderDashboard()">
                    <span class="text-xl sm:text-2xl mr-2">‚ò∏Ô∏è</span>
                    <span class="font-bold text-lg sm:text-xl tracking-tight text-stone-800 dark:text-stone-100 truncate">K8s Mastery Pro</span>
                </div>
                <div class="flex items-center space-x-2 sm:space-x-4">
                    <button id="theme-toggle" class="p-2 rounded-lg bg-stone-100 dark:bg-stone-800 hover:bg-stone-200 dark:hover:bg-stone-700 transition-colors">
                        <span id="theme-toggle-icon">üåô</span>
                    </button>
                    <button onclick="renderDashboard()" class="text-stone-600 dark:text-stone-400 hover:text-sky-600 dark:hover:text-sky-400 font-medium transition-colors text-sm sm:text-base hidden md:block">Dashboard</button>
                    <button onclick="renderAIAssistant()" class="text-stone-600 dark:text-stone-400 hover:text-sky-600 dark:hover:text-sky-400 font-medium transition-colors text-sm sm:text-base hidden md:block">AI Assistant</button>
                    <div class="text-xs sm:text-sm text-stone-500 font-mono hidden xs:block" id="progress-display">Day 0/12</div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 w-full">
        <div id="app-view" class="w-full">
            <!-- Content injected via JS -->
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-stone-100 dark:bg-stone-900 border-t border-stone-200 dark:border-stone-800 mt-auto transition-colors">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center">
            <p class="text-stone-500 dark:text-stone-400 text-sm">Interactive 12-Day DevOps Job-Ready Plan with AI-Powered Learning</p>
            <div class="mt-2 flex justify-center space-x-4">
                <a href="#" class="text-xs text-stone-400 hover:text-sky-600">GitHub</a>
                <a href="#" class="text-xs text-stone-400 hover:text-sky-600">Discord</a>
                <a href="#" class="text-xs text-stone-400 hover:text-sky-600">Report Issue</a>
            </div>
        </div>
    </footer>

    <script>
       // --- Enhanced Data Structure with Detailed Concepts ---
const k8sData = [
    {
        day: 1,
        title: "The Foundation - Architecture & Pods",
        domain: "Core",
        focus: "Understanding why K8s exists and the smallest unit of deployment.",
        concepts: [
            {
                id: "pod-basics",
                title: "Pod: Smallest Deployable Unit",
                description: "A Pod is the smallest and simplest unit in the Kubernetes object model. It represents a single instance of a running process in your cluster and can contain one or more containers that share storage and network.",
                details: {
                    whyImportant: "Pods encapsulate application containers, storage resources, unique network IP, and options that govern how the container(s) should run. Understanding Pods is fundamental because they're the atomic unit of scheduling.",
                    realWorldAnalogy: "Think of a Pod as a shipping container for your application. Inside, you can have multiple boxes (containers) that work together to form a complete service.",
                    commonMisconceptions: [
                        "Pods are not persistent - they are ephemeral and can be destroyed/recreated",
                        "Direct Pod deployment is rare - use Controllers instead",
                        "Containers in same Pod share localhost network"
                    ],
                    openSourceProjects: [
                        { name: "KubeVirt", url: "https://kubevirt.io", description: "Virtual Machine management on Kubernetes" },
                        { name: "Podman", url: "https://podman.io", description: "Daemonless container engine that can run Pods" },
                        { name: "Kata Containers", url: "https://katacontainers.io", description: "Secure container runtime with lightweight VMs" }
                    ],
                    troubleshooting: [
                        "Pod stuck in Pending: Check resource limits, node selectors, taints",
                        "CrashLoopBackOff: Check container logs, resource constraints",
                        "ImagePullBackOff: Check image name, registry credentials"
                    ]
                },
                tasks: [
                    "Create multi-container Pod with sidecar pattern",
                    "Debug Pod scheduling issues",
                    "Configure resource limits for Pod"
                ]
            },
            {
                id: "k8s-architecture",
                title: "Kubernetes Architecture",
                description: "Kubernetes follows a client-server architecture with a control plane (master) and worker nodes. The control plane makes global decisions about the cluster and responds to cluster events.",
                details: {
                    whyImportant: "Understanding the architecture helps in troubleshooting, scaling, and securing your cluster. Each component has specific responsibilities.",
                    realWorldAnalogy: "The control plane is like an airport control tower managing all flights (pods), while worker nodes are runways where planes actually land and take off.",
                    components: {
                        "Control Plane": ["API Server", "etcd", "Scheduler", "Controller Manager", "Cloud Controller Manager"],
                        "Worker Nodes": ["Kubelet", "Kube Proxy", "Container Runtime"],
                        "Add-ons": ["DNS", "Dashboard", "Ingress Controller"]
                    },
                    openSourceProjects: [
                        { name: "K3s", url: "https://k3s.io", description: "Lightweight Kubernetes distribution" },
                        { name: "MicroK8s", url: "https://microk8s.io", description: "Small, fast Kubernetes for developers" },
                        { name: "k0s", url: "https://k0sproject.io", description: "Zero-friction Kubernetes distribution" }
                    ],
                    productionConsiderations: [
                        "HA control plane with multiple master nodes",
                        "Separate etcd cluster for large deployments",
                        "Node pool strategy for different workloads"
                    ]
                }
            },
            {
                id: "yaml-declarative",
                title: "YAML & Declarative Configuration",
                description: "Kubernetes uses YAML files to declare the desired state of resources. The declarative approach specifies WHAT you want, not HOW to achieve it.",
                details: {
                    whyImportant: "Declarative configuration enables GitOps, version control, and reproducible deployments. It's the foundation of Infrastructure as Code (IaC).",
                    bestPractices: [
                        "Use kustomize or helm for managing multiple environments",
                        "Validate YAML with kubeval or kubectl --dry-run",
                        "Template repetitive configurations"
                    ],
                    tools: [
                        { name: "Kustomize", purpose: "Native Kubernetes configuration customization" },
                        { name: "Helm", purpose: "Package manager with templating" },
                        { name: "Jsonnet", purpose: "Data templating language for app config" }
                    ],
                    antiPatterns: [
                        "Hardcoding values in YAML",
                        "Mixing environment-specific config",
                        "Not using linters or validators"
                    ]
                }
            }
        ],
        tasks: [
            "Install kind/minikube and Kubectl",
            "Start a cluster",
            "Check cluster status `kubectl cluster-info`",
            "Create namespace `dev-team`",
            "List all namespaces",
            "Run Nginx pod imperatively",
            "Create Nginx pod via YAML",
            "List pods in default namespace",
            "List pods in `dev-team`",
            "Describe pod lifecycle events",
            "View running pod logs",
            "Execute `ls` inside a pod",
            "Delete a pod manually",
            "Create multi-container pod (App+Logger)",
            "Check specific container logs",
            "Get pod details in JSON",
            "Use `watch` to monitor status",
            "Delete all pods in namespace",
            "Set default namespace context"
        ],
        lab: {
            title: "The 'Ghost' Pod",
            scenario: "A developer created a pod manually, but it keeps disappearing after they delete it (or so they think). You need to prove that pods are ephemeral.",
            steps: "Create a pod, write a temporary file to `/tmp`, delete the pod, and recreate it. Verify the file is gone. This reinforces that Pods are not persistent."
        },
        commands: [
            { cmd: "kubectl run <name> --image=<image>", desc: "Create a pod" },
            { cmd: "kubectl get pods", desc: "List pods" },
            { cmd: "kubectl describe pod <name>", desc: "Deep dive into status" },
            { cmd: "kubectl logs <name>", desc: "Fetch logs" },
            { cmd: "kubectl delete pod <name>", desc: "Terminate pod" }
        ],
        resources: [
            { name: "Kubernetes Basics", url: "https://kubernetes.io/docs/tutorials/kubernetes-basics/" },
            { name: "K8s Architecture", url: "https://kubernetes.io/docs/concepts/overview/components/" }
        ]
    },
    {
        day: 2,
        title: "Controllers & Scalability",
        domain: "Workloads",
        focus: "Managing multiple pods, scaling, and self-healing.",
        concepts: [
            {
                id: "deployment-controller",
                title: "Deployments: Stateless Application Management",
                description: "A Deployment provides declarative updates for Pods and ReplicaSets. It manages the creation, scaling, and updating of application pods.",
                details: {
                    whyImportant: "Deployments ensure your application is running and can be updated without downtime. They're the primary way to deploy stateless applications in Kubernetes.",
                    realWorldAnalogy: "A Deployment is like an auto-pilot for your application. You set the destination (desired state) and it handles steering, speed changes, and course corrections automatically.",
                    updateStrategies: {
                        "RollingUpdate": "Gradually replaces old pods with new ones (default)",
                        "Recreate": "Terminates all old pods before creating new ones (for apps that can't run two versions)"
                    },
                    openSourceProjects: [
                        { name: "Argo Rollouts", url: "https://argoproj.github.io/argo-rollouts/", description: "Advanced deployment strategies (canary, blue-green)" },
                        { name: "Flagger", url: "https://flagger.app", description: "Progressive delivery operator for K8s" },
                        { name: "Keptn", url: "https://keptn.sh", description: "Cloud-native application life-cycle orchestration" }
                    ],
                    productionPatterns: [
                        "Use Deployment with at least 2 replicas for HA",
                        "Configure rolling update with maxUnavailable and maxSurge",
                        "Use pod anti-affinity to spread pods across nodes",
                        "Set resource requests and limits"
                    ]
                }
            },
            {
                id: "replicaset-scaling",
                title: "ReplicaSets & Horizontal Pod Autoscaler",
                description: "ReplicaSets ensure a specified number of pod replicas are running at any given time. HPA automatically scales the number of pods based on observed CPU utilization or custom metrics.",
                details: {
                    whyImportant: "Autoscaling ensures applications can handle variable loads efficiently while optimizing resource usage and costs.",
                    scalingTriggers: [
                        "CPU utilization (most common)",
                        "Memory usage",
                        "Custom metrics (requests per second, queue length)",
                        "External metrics (CloudWatch, Prometheus)"
                    ],
                    openSourceProjects: [
                        { name: "KEDA", url: "https://keda.sh", description: "Kubernetes Event-Driven Autoscaling" },
                        { name: "Prometheus Adapter", url: "https://github.com/kubernetes-sigs/prometheus-adapter", description: "Custom metrics API server for HPA" },
                        { name: "Vertical Pod Autoscaler", url: "https://github.com/kubernetes/autoscaler/tree/master/vertical-pod-autoscaler", description: "Automatically adjusts pod resource requests" }
                    ],
                    bestPractices: [
                        "Set up PodDisruptionBudget before scaling down",
                        "Use HPA with Cluster Autoscaler for full elasticity",
                        "Configure scaling policies (stabilization windows)",
                        "Monitor scaling events in production"
                    ]
                }
            },
            {
                id: "labels-selectors",
                title: "Labels & Selectors: Organizing Kubernetes Resources",
                description: "Labels are key/value pairs attached to objects. Selectors allow you to identify a set of objects based on their labels.",
                details: {
                    whyImportant: "Labels enable powerful operations like grouping, filtering, and selecting resources. They're fundamental to how Kubernetes connects different resources together.",
                    commonLabelPatterns: {
                        "app": "Application name (e.g., app=frontend)",
                        "version": "Application version (e.g., version=v1.2.3)",
                        "tier": "Application tier (e.g., tier=backend)",
                        "environment": "Deployment environment (e.g., env=production)"
                    },
                    openSourceProjects: [
                        { name: "Kustomize", url: "https://kustomize.io", description: "Label and annotation management" },
                        { name: "Relabeler", url: "https://github.com/pyrra-dev/relabeler", description: "Automated label management" }
                    ],
                    labelingStrategies: [
                        "Use consistent labeling across teams",
                        "Follow label naming conventions (RFC 1123)",
                        "Label resources for cost allocation",
                        "Use annotations for non-identifying metadata"
                    ]
                }
            }
        ],
        tasks: [
            "Create a Deployment YAML for Nginx with 3 replicas",
            "Apply the deployment and watch pods spin up",
            "Delete a pod manually and watch it respawn (Self-healing)",
            "Scale the deployment to 5 replicas",
            "Scale down to 2 replicas",
            "Update the image version (e.g., nginx:1.14.2 to 1.16.1)",
            "Check rollout status",
            "Perform a Rollback to the previous version",
            "Use labels to filter `get pods` (e.g., `app=nginx`)",
            "Generate YAML without creating resource (--dry-run=client)"
        ],
        lab: {
            title: "The Hydra",
            scenario: "Your application is under heavy load. Every time a crash occurs, you need the system to recover instantly.",
            steps: "Deploy an app with 3 replicas. Open a second terminal running `kubectl get pods -w`. Manually delete one pod. Observe the ReplicaSet instantly creating a new one to maintain the desired state."
        },
        commands: [
            { cmd: "kubectl create deployment <name> --image=<imgname>", desc: "Create deployment" },
            { cmd: "kubectl scale deployment <name> --replicas=3", desc: "Scale manually" },
            { cmd: "kubectl set image deployment/<name> <container>=<new-image>", desc: "Update image" },
            { cmd: "kubectl rollout status deployment/<name>", desc: "Check update progress" },
            { cmd: "kubectl rollout undo deployment/<name>", desc: "Revert update" }
        ],
        resources: [
            { name: "Deployments", url: "https://kubernetes.io/docs/concepts/workloads/controllers/deployment/" },
            { name: "Labels and Selectors", url: "https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/" }
        ]
    },
    {
        day: 3,
        title: "Networking & Service Discovery",
        domain: "Networking",
        focus: "Exposing applications and internal communication.",
        concepts: [
            {
                id: "service-types",
                title: "Services: Network Abstraction Layer",
                description: "A Service is an abstraction that defines a logical set of Pods and a policy by which to access them. Services enable network access to a set of Pods.",
                details: {
                    whyImportant: "Services provide stable networking for dynamic pods. They're essential for microservices communication, load balancing, and service discovery.",
                    serviceTypes: {
                        "ClusterIP": "Internal-only access (default)",
                        "NodePort": "Exposes service on each node's IP at a static port",
                        "LoadBalancer": "Creates external load balancer in cloud providers",
                        "ExternalName": "Maps service to DNS name"
                    },
                    openSourceProjects: [
                        { name: "MetalLB", url: "https://metallb.universe.tf", description: "Bare-metal load-balancer implementation" },
                        { name: "ExternalDNS", url: "https://github.com/kubernetes-sigs/external-dns", description: "Syncs Kubernetes services with DNS providers" },
                        { name: "KubeVIP", url: "https://kube-vip.io", description: "Kubernetes control plane VIP" }
                    ],
                    networkingPatterns: [
                        "Use ClusterIP for internal services",
                        "Use NodePort for development/testing",
                        "Use LoadBalancer for production external access",
                        "Combine with Ingress for HTTP routing"
                    ]
                }
            },
            {
                id: "dns-service-discovery",
                title: "DNS & Service Discovery",
                description: "Kubernetes has a built-in DNS service (CoreDNS) that automatically assigns DNS names to Services and Pods, enabling service discovery.",
                details: {
                    whyImportant: "DNS-based service discovery decouples services from IP addresses, making applications resilient to pod restarts and scaling operations.",
                    dnsNamingConventions: {
                        "Service": "<service-name>.<namespace>.svc.cluster.local",
                        "Pod": "<pod-ip>.<namespace>.pod.cluster.local",
                        "Headless Service": "<pod-name>.<service-name>.<namespace>.svc.cluster.local"
                    },
                    openSourceProjects: [
                        { name: "CoreDNS", url: "https://coredns.io", description: "DNS server that chains plugins" },
                        { name: "Consul", url: "https://www.consul.io", description: "Service mesh with service discovery" },
                        { name: "etcd", url: "https://etcd.io", description: "Distributed key-value store for service discovery" }
                    ],
                    bestPractices: [
                        "Use Kubernetes DNS for service discovery",
                        "Configure DNS policy appropriately",
                        "Monitor DNS resolution times",
                        "Use readiness probes to prevent DNS lookups to unavailable pods"
                    ]
                }
            },
            {
                id: "endpoints-endpointslice",
                title: "Endpoints & EndpointSlices",
                description: "Endpoints track the IP addresses of the pods that match a Service's selector. EndpointSlices are a more scalable alternative to Endpoints.",
                details: {
                    whyImportant: "Endpoints enable Services to route traffic to actual pods. Understanding them is crucial for debugging service connectivity issues.",
                    endpointLifecycle: [
                        "Created automatically when Service is created",
                        "Updated when pods matching selector come/go",
                        "Cleaned up when Service is deleted"
                    ],
                    openSourceProjects: [
                        { name: "EndpointSlice Controller", url: "https://kubernetes.io/docs/concepts/services-networking/endpoint-slices/", description: "Built-in Kubernetes controller" }
                    ],
                    troubleshooting: [
                        "Empty endpoints? Check Service selector matches Pod labels",
                        "Endpoints not updating? Check pod readiness status",
                        "Network connectivity issues? Check kube-proxy and network policies"
                    ]
                }
            }
        ],
        tasks: [
            "Create a ClusterIP service for your deployment",
            "Run a temporary pod (`busybox`) and `nslookup` the service",
            "Curl the service from another pod",
            "Change Service type to NodePort",
            "Access the app via `NodeIP:NodePort`",
            "Inspect Endpoints object (`kubectl get endpoints`)",
            "Filter services by namespace",
            "Create a service imperatively",
            "Understand the DNS naming convention (`svc.namespace.svc.cluster.local`)"
        ],
        lab: {
            title: "The Internal Phonebook",
            scenario: "Frontend pods need to talk to Backend pods, but Backend pod IPs change constantly.",
            steps: "Deploy 'Frontend' and 'Backend'. Create a Service for Backend. Configure Frontend to curl `http://backend-service`. Delete Backend pods to force IP changes. Verify Frontend can still reach Backend via the Service name."
        },
        commands: [
            { cmd: "kubectl expose deployment <name> --port=80", desc: "Expose as Service" },
            { cmd: "kubectl get svc", desc: "List services" },
            { cmd: "kubectl describe svc <name>", desc: "Check service config" },
            { cmd: "kubectl get endpoints", desc: "See backend pod IPs" },
            { cmd: "kubectl port-forward svc/<name> 8080:80", desc: "Localhost access" }
        ],
        resources: [
            { name: "Service", url: "https://kubernetes.io/docs/concepts/services-networking/service/" },
            { name: "DNS for Services", url: "https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/" }
        ]
    },
    {
        day: 4,
        title: "Configuration & Secrets",
        domain: "Configuration",
        focus: "Decoupling configuration from container images.",
        concepts: [
            {
                id: "configmap-patterns",
                title: "ConfigMaps: Externalizing Configuration",
                description: "ConfigMaps allow you to decouple configuration artifacts from image content to keep containerized applications portable.",
                details: {
                    whyImportant: "ConfigMaps enable the same container image to be deployed across different environments (dev, staging, prod) with different configurations.",
                    creationMethods: {
                        "Literal": "kubectl create configmap from command line",
                        "File": "kubectl create configmap from file",
                        "Directory": "kubectl create configmap from directory",
                        "YAML": "Define ConfigMap in YAML manifest"
                    },
                    openSourceProjects: [
                        { name: "Reloader", url: "https://github.com/stakater/Reloader", description: "Watches ConfigMap/Secret changes and triggers pod reloads" },
                        { name: "External Secrets", url: "https://external-secrets.io", description: "Syncs secrets from external APIs into Kubernetes" }
                    ],
                    injectionPatterns: [
                        "Environment variables (envFrom)",
                        "Volume mounts (as files)",
                        "Command-line arguments",
                        "Init container configuration"
                    ]
                }
            },
            {
                id: "secrets-management",
                title: "Secrets: Secure Configuration Management",
                description: "Secrets are similar to ConfigMaps but specifically designed to hold sensitive data like passwords, OAuth tokens, and SSH keys.",
                details: {
                    whyImportant: "Secrets provide a more secure way to handle sensitive data than storing it in Pod definitions or container images. They can be encrypted at rest.",
                    securityConsiderations: [
                        "Base64 encoding is NOT encryption",
                        "Enable encryption at rest for production",
                        "Use RBAC to restrict secret access",
                        "Rotate secrets regularly"
                    ],
                    openSourceProjects: [
                        { name: "Sealed Secrets", url: "https://github.com/bitnami-labs/sealed-secrets", description: "Encrypts secrets so they can be stored in Git" },
                        { name: "Vault", url: "https://www.vaultproject.io", description: "Secrets and encryption management system" },
                        { name: "SOPS", url: "https://github.com/mozilla/sops", description: "Secret OPerationS - editor of encrypted files" }
                    ],
                    secretTypes: {
                        "Opaque": "Generic key-value pairs (default)",
                        "kubernetes.io/dockerconfigjson": "Docker registry credentials",
                        "kubernetes.io/tls": "TLS certificate and key",
                        "kubernetes.io/service-account-token": "Service account token"
                    }
                }
            },
            {
                id: "immutable-configuration",
                title: "Immutable Configuration & Security",
                description: "Immutable ConfigMaps and Secrets prevent accidental updates that could cause application inconsistencies or security issues.",
                details: {
                    whyImportant: "Immutable configuration ensures consistency across deployments and prevents runtime changes that could lead to application errors.",
                    useCases: [
                        "Security-sensitive configurations",
                        "Configuration that should never change at runtime",
                        "Preventing accidental modifications",
                        "Improving performance by disabling watches"
                    ],
                    implementation: "Set `immutable: true` in ConfigMap or Secret spec",
                    migrationStrategy: "Create new ConfigMap/Secret and update Pod references"
                }
            }
        ],
        tasks: [
            "Create a ConfigMap from a literal value",
            "Create a ConfigMap from a file (e.g., nginx.conf)",
            "Inject ConfigMap as Environment Variable in Pod",
            "Mount ConfigMap as a volume in Pod",
            "Create a Secret manually",
            "Decode a Secret using base64",
            "Inject Secret as Env Var",
            "Mount Secret as a volume",
            "Update ConfigMap and verify volume update (latency)",
            "Create Docker Registry secret"
        ],
        lab: {
            title: "The Shapeshifter",
            scenario: "You need to change the background color of a web app without rebuilding the Docker image.",
            steps: "Deploy a web app that reads `BG_COLOR` from env. Create a ConfigMap `color=blue`. Map it to the pod. Change ConfigMap to `color=green`. Restart pod (or wait for volume sync) to see the app change."
        },
        commands: [
            { cmd: "kubectl create cm <name> --from-literal=k=v", desc: "Create ConfigMap" },
            { cmd: "kubectl create secret generic <name> --from-literal=pwd=123", desc: "Create Secret" },
            { cmd: "kubectl get cm,secret", desc: "List configs" },
            { cmd: "echo 'text' | base64", desc: "Linux base64 encode" },
            { cmd: "kubectl explain pod.spec.containers.env", desc: "Find env syntax" }
        ],
        resources: [
            { name: "ConfigMaps", url: "https://kubernetes.io/docs/concepts/configuration/configmap/" },
            { name: "Secrets", url: "https://kubernetes.io/docs/concepts/configuration/secret/" }
        ]
    },
    {
        day: 5,
        title: "Storage & Persistence",
        domain: "Storage",
        focus: "Managing stateful data that survives pod restarts.",
        concepts: [
            {
                id: "persistent-volumes",
                title: "PersistentVolumes (PV) & PersistentVolumeClaims (PVC)",
                description: "PVs are cluster resources representing physical storage. PVCs are requests for storage by users. They abstract storage implementation details.",
                details: {
                    whyImportant: "Persistent storage is essential for stateful applications (databases, file stores). PV/PVC separates storage provisioning from consumption.",
                    lifecycle: {
                        "Provisioning": "Static (admin creates PV) or Dynamic (StorageClass creates PV)",
                        "Binding": "PVC finds matching PV or triggers dynamic provisioning",
                        "Using": "Pod uses PVC as volume",
                        "Reclaiming": "Retain, Delete, or Recycle after PVC deletion"
                    },
                    openSourceProjects: [
                        { name: "Rook", url: "https://rook.io", description: "Storage orchestrator for cloud-native storage" },
                        { name: "Longhorn", url: "https://longhorn.io", description: "Cloud-native distributed block storage" },
                        { name: "OpenEBS", url: "https://openebs.io", description: "Container-attached storage" }
                    ],
                    accessModes: {
                        "ReadWriteOnce (RWO)": "Read-write by single node",
                        "ReadOnlyMany (ROX)": "Read-only by many nodes",
                        "ReadWriteMany (RWX)": "Read-write by many nodes"
                    }
                }
            },
            {
                id: "storage-class-dynamic",
                title: "StorageClass: Dynamic Provisioning",
                description: "StorageClass enables dynamic provisioning of PersistentVolumes. Administrators can define different 'classes' of storage.",
                details: {
                    whyImportant: "Dynamic provisioning automates storage management, allowing users to request storage without knowing underlying infrastructure details.",
                    parameters: [
                        "type (e.g., gp2, standard)",
                        "zone/region for cloud storage",
                        "iops, throughput specifications",
                        "replication factor"
                    ],
                    provisioners: {
                        "kubernetes.io/aws-ebs": "AWS Elastic Block Store",
                        "kubernetes.io/gce-pd": "Google Persistent Disk",
                        "kubernetes.io/azure-disk": "Azure Disk",
                        "kubernetes.io/cinder": "OpenStack Cinder",
                        "rook.io/block": "Rook block storage"
                    },
                    bestPractices: [
                        "Define StorageClasses for different performance tiers",
                        "Set default StorageClass for convenience",
                        "Use reclaim policies appropriate to storage cost",
                        "Monitor storage usage and costs"
                    ]
                }
            },
            {
                id: "volume-types-patterns",
                title: "Volume Types & Storage Patterns",
                description: "Kubernetes supports multiple volume types for different use cases: temporary, shared, cloud-native, and network-attached storage.",
                details: {
                    volumeTypes: {
                        "emptyDir": "Temporary directory tied to Pod lifecycle",
                        "hostPath": "Mount host filesystem (development only)",
                        "nfs": "Network File System",
                        "csi": "Container Storage Interface (modern standard)",
                        "configMap/secret": "Special volume types for configuration"
                    },
                    statefulPatterns: {
                        "Database with PVC": "MySQL/Postgres with persistent storage",
                        "Shared file storage": "NFS or object storage for shared files",
                        "Backup volumes": "Separate volumes for backups",
                        "Read-write-many": "For content management systems"
                    },
                    dataManagement: [
                        "Regular backups of PVC data",
                        "Snapshot management with VolumeSnapshot API",
                        "Data migration strategies",
                        "Monitoring storage capacity and performance"
                    ]
                }
            }
        ],
        tasks: [
            "Create a Pod with `emptyDir` volume",
            "Write data, restart container, verify data exists",
            "Delete Pod, verify `emptyDir` is gone",
            "Create a StorageClass (or use default)",
            "Create a PVC requesting 1Gi storage",
            "Mount PVC to a Pod (e.g., MySQL)",
            "Write data to the database",
            "Delete the Pod",
            "Recreate Pod, verify data persists",
            "Inspect PV and PVC Binding"
        ],
        lab: {
            title: "The Digital Safe",
            scenario: "A database pod crashes. When it comes back up, the user data must still be there.",
            steps: "Deploy a simple writer app that appends the timestamp to a file in `/data`. Use a PVC for `/data`. Delete the pod. New pod starts. Check the file; previous timestamps should remain."
        },
        commands: [
            { cmd: "kubectl get pv,pvc", desc: "List storage resources" },
            { cmd: "kubectl get sc", desc: "List storage classes" },
            { cmd: "kubectl describe pvc <name>", desc: "Check binding status" },
            { cmd: "kubectl patch pvc ...", desc: "Modify PVC" }
        ],
        resources: [
            { name: "Persistent Volumes", url: "https://kubernetes.io/docs/concepts/storage/persistent-volumes/" },
            { name: "Storage Classes", url: "https://kubernetes.io/docs/concepts/storage/storage-classes/" }
        ]
    },
    {
        day: 6,
        title: "Advanced Workloads",
        domain: "Workloads",
        focus: "Specialized controllers for stateful and system apps.",
        concepts: [
            {
                id: "statefulset-databases",
                title: "StatefulSets: Stateful Application Management",
                description: "StatefulSets manage stateful applications, maintaining sticky identities for pods. They provide stable, unique network identifiers and persistent storage.",
                details: {
                    whyImportant: "StatefulSets are essential for deploying stateful applications like databases, message queues, and key-value stores that require stable identities and persistent storage.",
                    characteristics: [
                        "Stable, unique network identifiers (pod-0, pod-1)",
                        "Persistent storage per pod (via PVC templates)",
                        "Ordered, graceful deployment and scaling",
                        "Ordered, graceful deletion and termination"
                    ],
                    openSourceProjects: [
                        { name: "Strimzi", url: "https://strimzi.io", description: "Apache Kafka on Kubernetes" },
                        { name: "Zalando Postgres Operator", url: "https://github.com/zalando/postgres-operator", description: "PostgreSQL operator using StatefulSets" },
                        { name: "MongoDB Kubernetes Operator", url: "https://www.mongodb.com/docs/kubernetes-operator/", description: "MongoDB deployment with StatefulSets" }
                    ],
                    useCases: [
                        "Databases (MySQL, PostgreSQL, MongoDB)",
                        "Message queues (Kafka, RabbitMQ)",
                        "Cache systems (Redis, Memcached)",
                        "Distributed data stores (Cassandra, etcd)"
                    ]
                }
            },
            {
                id: "daemonset-node-agents",
                title: "DaemonSets: Node-Level Workloads",
                description: "DaemonSets ensure that all (or some) nodes run a copy of a Pod. As nodes are added/removed, DaemonSets automatically adjust.",
                details: {
                    whyImportant: "DaemonSets are perfect for system-level services that need to run on every node: logging agents, monitoring agents, storage daemons, and network plugins.",
                    commonDaemonSets: {
                        "Logging": "Fluentd, Filebeat, Logstash",
                        "Monitoring": "Node Exporter, Datadog agent",
                        "Storage": "Rook, Longhorn, OpenEBS",
                        "Networking": "Calico, Cilium, Weave Net"
                    },
                    openSourceProjects: [
                        { name: "Fluentd", url: "https://www.fluentd.org", description: "Log collection daemon" },
                        { name: "Node Exporter", url: "https://github.com/prometheus/node_exporter", description: "Hardware/OS metrics exporter" },
                        { name: "Cilium", url: "https://cilium.io", description: "eBPF-based networking/security" }
                    ],
                    scheduling: [
                        "Node selectors for specific nodes",
                        "Tolerations for tainted nodes",
                        "Affinity/anti-affinity rules",
                        "Pod priority for resource contention"
                    ]
                }
            },
            {
                id: "jobs-cronjobs-batch",
                title: "Jobs & CronJobs: Batch Processing",
                description: "Jobs create one or more Pods and ensure they run to completion. CronJobs create Jobs on a time-based schedule.",
                details: {
                    whyImportant: "Jobs handle batch processing, data import/export, and one-time tasks. CronJobs automate periodic tasks like backups, reports, and cleanup.",
                    jobPatterns: {
                        "Single Pod Job": "Simple one-time task",
                        "Parallel Jobs with Fixed Completion Count": "Process N items with M workers",
                        "Work Queue with Per-Pod Processing": "Each pod processes from shared queue",
                        "Indexed Jobs": "Each pod gets unique index"
                    },
                    openSourceProjects: [
                        { name: "Argo Workflows", url: "https://argoproj.github.io/workflows/", description: "Container-native workflow engine" },
                        { name: "Apache Airflow", url: "https://airflow.apache.org", description: "Platform to programmatically author workflows" },
                        { name: "Kube-batch", url: "https://github.com/kubernetes-sigs/kube-batch", description: "Batch scheduler for Kubernetes" }
                    ],
                    bestPractices: [
                        "Set appropriate backoff limits",
                        "Configure active deadline seconds",
                        "Use ttlSecondsAfterFinished for cleanup",
                        "Monitor job completion and failures"
                    ]
                }
            }
        ],
        tasks: [
            "Create a DaemonSet (e.g., Fluentd)",
            "Verify one pod runs on every node",
            "Create a StatefulSet (e.g., Redis)",
            "Observe naming convention (web-0, web-1)",
            "Scale StatefulSet and watch sequential creation",
            "Create a Job that calculates Pi",
            "Check Job logs after completion",
            "Create a CronJob that runs every minute",
            "Suspend a CronJob"
        ],
        lab: {
            title: "The Ordered Lineup",
            scenario: "You are deploying a primary-replica database. The primary (db-0) must exist before the replica (db-1) starts.",
            steps: "Deploy a StatefulSet. Watch `kubectl get pods -w`. Notice `db-1` does not start until `db-0` is fully Ready. Delete `db-0` and watch it reclaim its specific identity."
        },
        commands: [
            { cmd: "kubectl create job <name> --image=busybox", desc: "Create Job" },
            { cmd: "kubectl get cronjobs", desc: "List scheduled jobs" },
            { cmd: "kubectl get statefulsets", desc: "List StatefulSets" },
            { cmd: "kubectl get ds", desc: "List DaemonSets" }
        ],
        resources: [
            { name: "StatefulSets", url: "https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/" },
            { name: "DaemonSets", url: "https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/" }
        ]
    },
    {
        day: 7,
        title: "Observability & Probes",
        domain: "Operations",
        focus: "Monitoring health and debugging issues.",
        concepts: [
            {
                id: "health-probes-liveness",
                title: "Health Probes: Liveness, Readiness, Startup",
                description: "Probes let Kubernetes monitor the health of your containers. Liveness probes restart unhealthy containers, readiness probes control service traffic, and startup probes handle slow-starting containers.",
                details: {
                    whyImportant: "Proper health checking ensures applications are responsive and traffic is only sent to healthy pods. This improves application reliability and user experience.",
                    probeTypes: {
                        "Liveness": "Is container running? Restarts if fails",
                        "Readiness": "Is container ready for traffic? Removes from endpoints if fails",
                        "Startup": "Has application started? Delays other probes"
                    },
                    probeHandlers: {
                        "HTTP GET": "HTTP request to specified path",
                        "TCP Socket": "TCP connection to specified port",
                        "Exec": "Execute command in container"
                    },
                    openSourceProjects: [
                        { name: "Prometheus Blackbox Exporter", url: "https://github.com/prometheus/blackbox_exporter", description: "HTTP/TCP/ICMP probing" },
                        { name: "Kubernetes Downward API", url: "https://kubernetes.io/docs/concepts/workloads/pods/downward-api/", description: "Expose pod info for probes" }
                    ],
                    configurationBestPractices: [
                        "Set appropriate initial delay for startup probes",
                        "Use separate endpoints for liveness and readiness",
                        "Configure failure thresholds based on application behavior",
                        "Make probes lightweight and fast"
                    ]
                }
            },
            {
                id: "metrics-monitoring",
                title: "Metrics & Monitoring",
                description: "Kubernetes provides metrics about cluster, node, and pod resource usage. These metrics are essential for scaling, debugging, and cost optimization.",
                details: {
                    whyImportant: "Monitoring enables proactive issue detection, capacity planning, performance optimization, and cost management.",
                    metricSources: {
                        "cAdvisor": "Container metrics (CPU, memory, filesystem)",
                        "kube-state-metrics": "Kubernetes object metrics",
                        "Metrics Server": "Cluster-level resource usage aggregation",
                        "Custom metrics": "Application-specific metrics"
                    },
                    openSourceProjects: [
                        { name: "Prometheus", url: "https://prometheus.io", description: "Monitoring system and time series database" },
                        { name: "Grafana", url: "https://grafana.com", description: "Visualization and dashboarding" },
                        { name: "Thanos", url: "https://thanos.io", description: "Highly available Prometheus setup" },
                        { name: "VictoriaMetrics", url: "https://victoriametrics.com", description: "Fast, scalable monitoring solution" }
                    ],
                    monitoringStack: [
                        "Metrics collection (Prometheus)",
                        "Alerting (Alertmanager)",
                        "Visualization (Grafana)",
                        "Log aggregation (Loki, Elasticsearch)",
                        "Distributed tracing (Jaeger, Zipkin)"
                    ]
                }
            },
            {
                id: "debugging-troubleshooting",
                title: "Debugging & Troubleshooting",
                description: "Kubernetes provides multiple tools for debugging applications: logs, exec, port-forwarding, ephemeral containers, and events.",
                details: {
                    whyImportant: "Effective debugging reduces mean time to resolution (MTTR) and improves system reliability.",
                    debuggingTools: {
                        "kubectl logs": "Container stdout/stderr",
                        "kubectl describe": "Detailed object status and events",
                        "kubectl exec": "Execute commands in running containers",
                        "kubectl port-forward": "Forward local ports to pods",
                        "kubectl debug": "Ephemeral debug containers"
                    },
                    commonIssues: {
                        "CrashLoopBackOff": "Container repeatedly crashes",
                        "ImagePullBackOff": "Cannot pull container image",
                        "Pending pods": "Resource constraints or scheduling issues",
                        "Network issues": "Service connectivity problems"
                    },
                    openSourceProjects: [
                        { name: "Lens", url: "https://k8slens.dev", description: "Kubernetes IDE" },
                        { name: "K9s", url: "https://k9scli.io", description: "Terminal UI for Kubernetes" },
                        { name: "Octant", url: "https://octant.dev", description: "Web-based cluster visualization" }
                    ]
                }
            }
        ],
        tasks: [
            "Add a Liveness probe to a pod",
            "Simulate app failure (delete file checked by probe)",
            "Watch K8s restart the pod",
            "Add a Readiness probe",
            "Simulate load; fail readiness",
            "Verify Service endpoints remove the pod IP",
            "Install Metrics Server (if needed)",
            "Run `kubectl top nodes` and `top pods`",
            "View events for a namespace",
            "Debug a CrashLoopBackOff"
        ],
        lab: {
            title: "The Broken Loop",
            scenario: "An app starts but crashes immediately. Another runs but returns 500 errors.",
            steps: "Debug a provided 'broken' manifest. Use `kubectl logs`, `kubectl describe`, and `kubectl get events` to find the root cause (e.g., missing secret, wrong command, failing probe) and fix it."
        },
        commands: [
            { cmd: "kubectl top pods", desc: "Check CPU/RAM usage" },
            { cmd: "kubectl logs <pod> -c <container> --previous", desc: "Logs of crashed instance" },
            { cmd: "kubectl get events --sort-by=.metadata.creationTimestamp", desc: "Chronological events" },
            { cmd: "kubectl describe pod <name>", desc: "Check probe failure events" }
        ],
        resources: [
            { name: "Configure Liveness/Readiness", url: "https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/" },
            { name: "Troubleshooting", url: "https://kubernetes.io/docs/tasks/debug/" }
        ]
    },
    {
        day: 8,
        title: "Security & RBAC",
        domain: "Security",
        focus: "Controlling access to the cluster and resources.",
        concepts: [
            {
                id: "rbac-authorization",
                title: "RBAC: Role-Based Access Control",
                description: "RBAC regulates access to Kubernetes resources based on roles assigned to users. It provides fine-grained authorization for cluster operations.",
                details: {
                    whyImportant: "RBAC is essential for security, compliance, and team collaboration. It implements the principle of least privilege, limiting users to only necessary permissions.",
                    rbacComponents: {
                        "Role": "Namespace-scoped permissions",
                        "ClusterRole": "Cluster-scoped permissions",
                        "RoleBinding": "Grants Role permissions to subjects in a namespace",
                        "ClusterRoleBinding": "Grants ClusterRole permissions cluster-wide"
                    },
                    openSourceProjects: [
                        { name: "Open Policy Agent (OPA)", url: "https://www.openpolicyagent.org", description: "Policy-based control for cloud native environments" },
                        { name: "Kyverno", url: "https://kyverno.io", description: "Kubernetes Native Policy Management" },
                        { name: "Kubescape", url: "https://kubescape.io", description: "Kubernetes security platform" }
                    ],
                    bestPractices: [
                        "Use ServiceAccounts for application identity",
                        "Follow principle of least privilege",
                        "Regularly audit RBAC configurations",
                        "Use namespaces to isolate permissions",
                        "Avoid wildcard permissions (*)"
                    ]
                }
            },
            {
                id: "service-accounts-authentication",
                title: "Service Accounts & Authentication",
                description: "Service Accounts provide identity for processes running in Pods. They authenticate to the Kubernetes API and can be granted permissions via RBAC.",
                details: {
                    whyImportant: "Service Accounts enable secure communication between applications and the Kubernetes API, allowing applications to manage Kubernetes resources programmatically.",
                    tokenTypes: {
                        "Static token file": "Legacy, mounted at /var/run/secrets/kubernetes.io/serviceaccount",
                        "ServiceAccount token volume projection": "Modern, time-limited, audience-bound tokens",
                        "Bound Service Account tokens": "Pod-bound, time-limited tokens"
                    },
                    authenticationMethods: {
                        "X.509 client certificates": "For user authentication",
                        "Bearer tokens": "For ServiceAccounts and some users",
                        "OpenID Connect (OIDC)": "Integration with identity providers",
                        "Webhook": "External authentication service"
                    },
                    securityConsiderations: [
                        "AutomountServiceAccountToken: false for pods that don't need API access",
                        "Use token volume projection for better security",
                        "Regularly rotate ServiceAccount tokens",
                        "Monitor ServiceAccount usage"
                    ]
                }
            },
            {
                id: "network-policies-security",
                title: "Network Policies & Pod Security",
                description: "Network Policies control traffic flow between pods. Pod Security Standards define policies for securing pod specifications.",
                details: {
                    whyImportant: "Network segmentation and pod security hardening are critical defense-in-depth measures for protecting applications and data.",
                    networkPolicyPatterns: {
                        "Default deny all": "Start with denying all traffic",
                        "Allow specific traffic": "Whitelist required connections",
                        "Namespace isolation": "Restrict cross-namespace traffic",
                        "Egress filtering": "Control outbound traffic"
                    },
                    podSecurityStandards: {
                        "Privileged": "Unrestricted policy",
                        "Baseline": "Minimally restrictive policy",
                        "Restricted": "Heavily restricted policy"
                    },
                    openSourceProjects: [
                        { name: "Cilium", url: "https://cilium.io", description: "eBPF-based networking, security, observability" },
                        { name: "Calico", url: "https://www.tigera.io/project-calico/", description: "Networking and network security" },
                        { name: "Pod Security Admission", url: "https://kubernetes.io/docs/concepts/security/pod-security-admission/", description: "Built-in pod security" }
                    ]
                }
            }
        ],
        tasks: [
            "Create a ServiceAccount",
            "Create a Role (can only `list` pods)",
            "Bind Role to ServiceAccount",
            "Run a pod using that ServiceAccount",
            "Test access using `kubectl auth can-i`",
            "Create a NetworkPolicy (deny all traffic)",
            "Allow traffic only from specific pod",
            "Run pod as non-root user (SecurityContext)",
            "Mount API token into pod"
        ],
        lab: {
            title: "The Bouncer",
            scenario: "The `db` pod should only accept connections from `backend`, not `frontend` or `external`.",
            steps: "Apply a 'Default Deny' NetworkPolicy. Try to ping DB from Backend (fails). Create an 'Allow' policy specifically selecting Backend's labels. Verify connectivity is restored only for Backend."
        },
        commands: [
            { cmd: "kubectl create sa <name>", desc: "Create ServiceAccount" },
            { cmd: "kubectl create role <name> --verb=get --resource=pods", desc: "Create Role" },
            { cmd: "kubectl create rolebinding <name> --role=<role> --serviceaccount=<ns:sa>", desc: "Bind Role" },
            { cmd: "kubectl auth can-i get pods --as=system:serviceaccount:<ns>:<name>", desc: "Test permissions" }
        ],
        resources: [
            { name: "Using RBAC", url: "https://kubernetes.io/docs/reference/access-authn-authz/rbac/" },
            { name: "Network Policies", url: "https://kubernetes.io/docs/concepts/services-networking/network-policies/" }
        ]
    },
    {
        day: 9,
        title: "Helm & Package Management",
        domain: "Automation",
        focus: "Managing complex applications as packages.",
        concepts: [
            {
                id: "helm-package-management",
                title: "Helm: Kubernetes Package Manager",
                description: "Helm helps you manage Kubernetes applications through Helm Charts, which are packages of pre-configured Kubernetes resources.",
                details: {
                    whyImportant: "Helm simplifies deployment of complex applications, enables versioning and sharing of configurations, and facilitates deployment across multiple environments.",
                    chartComponents: {
                        "Chart.yaml": "Chart metadata (name, version, dependencies)",
                        "values.yaml": "Default configuration values",
                        "templates/": "Kubernetes manifest templates",
                        "charts/": "Dependency charts",
                        "templates/NOTES.txt": "Post-installation notes"
                    },
                    openSourceProjects: [
                        { name: "Artifact Hub", url: "https://artifacthub.io", description: "Find, install, and publish packages" },
                        { name: "Helm Dashboard", url: "https://github.com/komodorio/helm-dashboard", description: "UI for managing Helm releases" },
                        { name: "Helm Diff", url: "https://github.com/databus23/helm-diff", description: "Preview changes before applying" }
                    ],
                    bestPractices: [
                        "Use semantic versioning for charts",
                        "Parameterize configurations with values",
                        "Use named templates for reusability",
                        "Test charts with helm template and dry-run",
                        "Sign charts with provenance files"
                    ]
                }
            },
            {
                id: "helm-templating-values",
                title: "Helm Templating & Values Management",
                description: "Helm uses Go templates to generate Kubernetes manifests. Values can be overridden at install time for different environments.",
                details: {
                    whyImportant: "Templating enables reusability across environments. Values management separates configuration from templates, following the Twelve-Factor App methodology.",
                    templatingFeatures: {
                        "Variables": "{{ .Values.variableName }}",
                        "Functions": "Built-in and Sprig template functions",
                        "Flow Control": "if/else, with, range",
                        "Named Templates": "Define reusable template snippets",
                        "Accessing Files": "Include files in templates"
                    },
                    valuesManagement: {
                        "values.yaml": "Default values in chart",
                        "--values/-f flag": "Override with external files",
                        "--set flag": "Override individual values",
                        "Environment-specific values": "dev-values.yaml, prod-values.yaml"
                    },
                    advancedPatterns: [
                        "Chart dependencies (requirements.yaml)",
                        "Library charts for shared templates",
                        "Hooks for lifecycle management",
                        "Tests (test connection, smoke tests)"
                    ]
                }
            },
            {
                id: "helm-repositories-releases",
                title: "Helm Repositories & Release Management",
                description: "Helm repositories store and share charts. Helm manages releases - installations of charts with specific configurations.",
                details: {
                    whyImportant: "Repositories enable sharing charts across teams and organizations. Release management tracks deployed applications and enables rollbacks.",
                    repositoryTypes: {
                        "Public": "Artifact Hub, Bitnami",
                        "Private": "ChartMuseum, Harbor, OCI registries",
                        "Local": "File system repository"
                    },
                    releaseLifecycle: {
                        "Install": "Create new release",
                        "Upgrade": "Update existing release",
                        "Rollback": "Revert to previous release",
                        "Uninstall": "Delete release"
                    },
                    releaseManagementTools: [
                        "Helm Secrets for encrypted values",
                        "Helmfile for declarative releases",
                        "Helm Operator for GitOps",
                        "Flux for continuous delivery"
                    ]
                }
            }
        ],
        tasks: [
            "Install Helm CLI",
            "Add a Helm repo (e.g., Bitnami)",
            "Search for a chart (e.g., Nginx, MySQL)",
            "Install a chart with default values",
            "List releases",
            "Upgrade a release with new values (change replica count)",
            "Rollback a release",
            "Create a starter chart (`helm create`)",
            "Render templates locally (`helm template`)",
            "Uninstall a release"
        ],
        lab: {
            title: "The Storefront",
            scenario: "You need to deploy Wordpress, but writing all the Deployment, Service, PVC, and Secret YAMLs manually is tedious.",
            steps: "Use Helm to deploy Wordpress. Inspect the `values.yaml` to customize the blog title and admin password. Deploy it in one command. Upgrade the version without losing data."
        },
        commands: [
            { cmd: "helm repo add <name> <url>", desc: "Add repository" },
            { cmd: "helm install <release> <chart>", desc: "Install app" },
            { cmd: "helm list", desc: "View installed apps" },
            { cmd: "helm upgrade <release> <chart> -f values.yaml", desc: "Update config" },
            { cmd: "helm uninstall <release>", desc: "Remove app" }
        ],
        resources: [
            { name: "Helm Quickstart", url: "https://helm.sh/docs/intro/quickstart/" },
            { name: "Artifact Hub", url: "https://artifacthub.io/" }
        ]
    },
    {
        day: 10,
        title: "Ingress & Advanced Networking",
        domain: "Networking",
        focus: "Routing external traffic into the cluster.",
        concepts: [
            {
                id: "ingress-traffic-routing",
                title: "Ingress: HTTP/HTTPS Traffic Routing",
                description: "Ingress exposes HTTP and HTTPS routes from outside the cluster to services within the cluster. It provides load balancing, SSL termination, and name-based virtual hosting.",
                details: {
                    whyImportant: "Ingress is the standard way to expose web applications externally. It provides advanced routing capabilities beyond simple Service types.",
                    routingRules: {
                        "Host-based routing": "Route based on HTTP host header",
                        "Path-based routing": "Route based on URL path",
                        "TLS termination": "SSL/TLS termination at ingress",
                        "Rewrite rules": "URL rewrite before forwarding"
                    },
                    openSourceProjects: [
                        { name: "Ingress NGINX", url: "https://kubernetes.github.io/ingress-nginx/", description: "NGINX Ingress Controller" },
                        { name: "Traefik", url: "https://traefik.io/traefik/", description: "Cloud-native application proxy" },
                        { name: "Contour", url: "https://projectcontour.io", description: "Envoy-based ingress controller" },
                        { name: "Ambassador", url: "https://www.getambassador.io", description: "API Gateway for Kubernetes" }
                    ],
                    ingressClass: "New standard for specifying ingress controller",
                    annotations: "Controller-specific configurations"
                }
            },
            {
                id: "ingress-controllers-implementation",
                title: "Ingress Controllers & Implementation",
                description: "An Ingress Controller is responsible for fulfilling the Ingress, usually with a load balancer. Different controllers offer different features.",
                details: {
                    whyImportant: "The Ingress Controller implements the actual routing logic. Choice of controller affects features, performance, and integration capabilities.",
                    popularControllers: {
                        "NGINX Ingress Controller": "Most widely used, feature-rich",
                        "Traefik": "Dynamic configuration, Let's Encrypt integration",
                        "HAProxy Ingress": "High performance, enterprise features",
                        "Istio Gateway": "Service mesh integration"
                    },
                    featuresComparison: {
                        "Load balancing algorithms": "Round-robin, least connections, IP hash",
                        "Authentication": "Basic auth, OAuth, JWT",
                        "Rate limiting": "Requests per second/minute",
                        "Web Application Firewall (WAF)": "ModSecurity integration",
                        "Metrics": "Prometheus metrics endpoint"
                    },
                    deploymentPatterns: [
                        "DaemonSet with hostNetwork for performance",
                        "Deployment with LoadBalancer Service",
                        "Multiple controllers for different use cases",
                        "Global vs namespace-scoped controllers"
                    ]
                }
            },
            {
                id: "tls-certificates-ingress",
                title: "TLS/SSL Certificates & Security",
                description: "Ingress supports TLS termination with SSL certificates. Cert-manager automates certificate management and renewal.",
                details: {
                    whyImportant: "TLS encryption is essential for security. Automated certificate management ensures certificates don't expire and reduces operational overhead.",
                    certificateTypes: {
                        "Self-signed": "For development/testing",
                        "Let's Encrypt": "Free, automated certificates",
                        "Commercial CA": "Enterprise certificates",
                        "Private CA": "Internal PKI"
                    },
                    openSourceProjects: [
                        { name: "cert-manager", url: "https://cert-manager.io", description: "Automated certificate management" },
                        { name: "Let's Encrypt", url: "https://letsencrypt.org", description: "Free SSL/TLS certificates" },
                        { name: "Step Certificates", url: "https://smallstep.com/certificates/", description: "Private certificate authority" }
                    ],
                    acmeChallenges: {
                        "HTTP-01": "HTTP web server challenge",
                        "DNS-01": "DNS record challenge",
                        "TLS-ALPN-01": "TLS ALPN extension challenge"
                    }
                }
            }
        ],
        tasks: [
            "Enable Ingress Controller (minikube addons enable ingress)",
            "Create two deployments (Apple & Banana)",
            "Expose them as Services",
            "Create an Ingress resource",
            "Configure `/apple` to route to Apple Service",
            "Configure `/banana` to route to Banana Service",
            "Edit `/etc/hosts` to map local domain",
            "Test access via browser/curl",
            "Inspect Ingress Controller logs"
        ],
        lab: {
            title: "The Traffic Cop",
            scenario: "You have one IP address but need to host two different websites.",
            steps: "Deploy 'Blue Site' and 'Green Site'. Create an Ingress rule so `blue.local` goes to Blue and `green.local` goes to Green. Verify the routing works seamlessly through the single entry point."
        },
        commands: [
            { cmd: "kubectl get ingress", desc: "List ingress rules" },
            { cmd: "kubectl describe ingress <name>", desc: "Check routing config" },
            { cmd: "kubectl logs -n ingress-nginx <controller-pod>", desc: "Debug controller" },
            { cmd: "curl -H 'Host: example.com' <ip>", desc: "Test host routing" }
        ],
        resources: [
            { name: "Ingress", url: "https://kubernetes.io/docs/concepts/services-networking/ingress/" },
            { name: "Nginx Ingress Controller", url: "https://kubernetes.github.io/ingress-nginx/" }
        ]
    },
    {
        day: 11,
        title: "Scheduling & Resource Management",
        domain: "Optimization",
        focus: "Controlling exactly where pods run and how much they consume.",
        concepts: [
            {
                id: "resource-requests-limits",
                title: "Resource Requests & Limits",
                description: "Requests specify the minimum resources a container needs. Limits specify the maximum resources a container can use.",
                details: {
                    whyImportant: "Proper resource management ensures application performance, prevents resource starvation, and enables efficient cluster utilization.",
                    resourceTypes: {
                        "CPU": "Measured in cores or millicores (1000m = 1 core)",
                        "Memory": "Measured in bytes (Ki, Mi, Gi)",
                        "Ephemeral storage": "Temporary disk space",
                        "Hugepages": "Large memory pages for performance"
                    },
                    qualityOfServiceClasses: {
                        "Guaranteed": "Both limits and requests set (equal)",
                        "Burstable": "Requests < Limits or only requests set",
                        "BestEffort": "No requests or limits"
                    },
                    bestPractices: [
                        "Set requests based on actual usage (P99)",
                        "Set limits 20-30% above requests",
                        "Use Vertical Pod Autoscaler for tuning",
                        "Monitor actual vs requested usage"
                    ]
                }
            },
            {
                id: "node-affinity-taints",
                title: "Node Affinity, Taints & Tolerations",
                description: "Node affinity attracts pods to nodes. Taints repel pods from nodes. Tolerations allow pods to tolerate tainted nodes.",
                details: {
                    whyImportant: "Advanced scheduling controls enable workload placement optimization, cost savings, and specialized hardware utilization.",
                    affinityTypes: {
                        "RequiredDuringSchedulingIgnoredDuringExecution": "Hard requirement",
                        "PreferredDuringSchedulingIgnoredDuringExecution": "Soft preference",
                        "NodeAffinity": "Schedule based on node labels",
                        "PodAffinity": "Schedule near other pods",
                        "PodAntiAffinity": "Spread pods apart"
                    },
                    taintEffects: {
                        "NoSchedule": "No new pods scheduled",
                        "PreferNoSchedule": "Try to avoid scheduling",
                        "NoExecute": "Evict existing pods"
                    },
                    useCases: [
                        "GPU nodes for ML workloads",
                        "Spot instances for batch jobs",
                        "Dedicated nodes for critical services",
                        "Geographic distribution"
                    ]
                }
            },
            {
                id: "resource-quotas-limits",
                title: "Resource Quotas & Limit Ranges",
                description: "ResourceQuota restricts total resource consumption per namespace. LimitRange sets default/min/max resources for pods/containers.",
                details: {
                    whyImportant: "Quotas prevent namespace overconsumption. LimitRanges ensure sensible defaults and prevent resource hogging.",
                    quotaScopes: {
                        "Terminating": "Pods with active deadline",
                        "NotTerminating": "Pods without active deadline",
                        "BestEffort": "Pods without resource requests",
                        "NotBestEffort": "Pods with resource requests"
                    },
                    limitRangeTypes: {
                        "Container": "Per-container limits",
                        "Pod": "Per-pod limits (sum of containers)",
                        "PersistentVolumeClaim": "Storage limits"
                    },
                    multi-tenancyPatterns: [
                        "Separate namespaces per team",
                        "Quotas based on team budget",
                        "PriorityClasses for resource contention",
                        "Cost allocation by namespace"
                    ]
                }
            }
        ],
        tasks: [
            "Set CPU/Memory requests on a pod",
            "Set Limits (try to exceed them and watch OOMKill)",
            "Label a node (e.g., `gpu=true`)",
            "Use NodeSelector to schedule pod on labeled node",
            "Taint a node (e.g., `env=prod:NoSchedule`)",
            "Try to schedule a standard pod (Pending state)",
            "Add Toleration to pod to bypass taint",
            "Configure Namespace ResourceQuota",
            "Understand Pod priority"
        ],
        lab: {
            title: "The VIP Lounge",
            scenario: "You have a dedicated high-performance node. Only critical 'Gold' workloads should run there. No 'Silver' workloads allowed.",
            steps: "Taint the high-perf node. Deploy a 'Silver' pod (it stays Pending or goes to other nodes). Deploy a 'Gold' pod with the correct toleration. Verify 'Gold' is the only one enjoying the high-performance node."
        },
        commands: [
            { cmd: "kubectl taint nodes <node> key=value:NoSchedule", desc: "Add taint" },
            { cmd: "kubectl label nodes <node> key=value", desc: "Add label" },
            { cmd: "kubectl describe node <name>", desc: "Check usage/taints" },
            { cmd: "kubectl get pods -o wide", desc: "See which node pods are on" }
        ],
        resources: [
            { name: "Taints and Tolerations", url: "https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/" },
            { name: "Resource Management", url: "https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/" }
        ]
    },
    {
        day: 12,
        title: "Ecosystem & The Future",
        domain: "Advanced",
        focus: "Extending K8s and modern deployment practices.",
        concepts: [
            {
                id: "crd-operators-extensibility",
                title: "CRDs & Operators: Extending Kubernetes",
                description: "Custom Resource Definitions (CRDs) extend the Kubernetes API. Operators use CRDs to automate application management.",
                details: {
                    whyImportant: "CRDs and Operators enable Kubernetes to manage any application or infrastructure component, following the operator pattern for complex software.",
                    operatorPattern: {
                        "Controller": "Reconciles desired vs actual state",
                        "Custom Resource": "Domain-specific API",
                        "Operator SDK": "Tools for building operators",
                        "Operator Lifecycle Manager": "Install/upgrade operators"
                    },
                    openSourceProjects: [
                        { name: "Operator SDK", url: "https://sdk.operatorframework.io", description: "Build Kubernetes operators" },
                        { name: "OperatorHub", url: "https://operatorhub.io", description: "Discover and share operators" },
                        { name: "Kubebuilder", url: "https://book.kubebuilder.io", description: "Framework for building controllers" },
                        { name: "Crossplane", url: "https://crossplane.io", description: "Cloud native control planes" }
                    ],
                    popularOperators: [
                        "Prometheus Operator (monitoring)",
                        "PostgreSQL Operator (databases)",
                        "Cert-manager (certificates)",
                        "Istio Operator (service mesh)"
                    ]
                }
            },
            {
                id: "gitops-argocd",
                title: "GitOps & ArgoCD",
                description: "GitOps is a methodology where Git is the single source of truth for declarative infrastructure and applications. ArgoCD is a declarative GitOps tool for Kubernetes.",
                details: {
                    whyImportant: "GitOps enables automated, auditable, and reproducible deployments. It improves collaboration, rollback capability, and security.",
                    gitOpsPrinciples: {
                        "Declarative": "System described declaratively",
                        "Versioned/Immutable": "Stored in Git",
                        "Pulled Automatically": "Software agents pull updates",
                        "Continually Reconciled": "Actual state matches desired"
                    },
                    openSourceProjects: [
                        { name: "ArgoCD", url: "https://argo-cd.readthedocs.io", description: "Declarative GitOps CD for Kubernetes" },
                        { name: "Flux", url: "https://fluxcd.io", description: "GitOps toolkit for Kubernetes" },
                        { name: "Jenkins X", url: "https://jenkins-x.io", description: "CI/CD for Kubernetes" },
                        { name: "Tekton", url: "https://tekton.dev", description: "Cloud-native CI/CD framework" }
                    ],
                    deploymentStrategies: [
                        "Blue-green deployments",
                        "Canary releases",
                        "Feature flags",
                        "Progressive delivery"
                    ]
                }
            },
            {
                id: "service-mesh-future",
                title: "Service Mesh & Future Trends",
                description: "Service mesh provides dedicated infrastructure layer for service-to-service communication. eBPF enables advanced networking, security, and observability.",
                details: {
                    whyImportant: "Service mesh solves microservices challenges: observability, security, reliability. eBPF enables kernel-level networking and security without modifying kernel.",
                    serviceMeshFeatures: {
                        "Traffic management": "Load balancing, routing, circuit breaking",
                        "Security": "mTLS, authorization, identity",
                        "Observability": "Metrics, tracing, logging",
                        "Policy enforcement": "Rate limiting, access control"
                    },
                    openSourceProjects: [
                        { name: "Istio", url: "https://istio.io", description: "Service mesh platform" },
                        { name: "Linkerd", url: "https://linkerd.io", description: "Ultralight service mesh" },
                        { name: "Cilium", url: "https://cilium.io", description: "eBPF-based networking/security" },
                        { name: "Knative", url: "https://knative.dev", description: "Serverless on Kubernetes" }
                    ],
                    emergingTrends: [
                        "eBPF-based networking and security",
                        "WebAssembly (Wasm) in containers",
                        "FinOps for cost optimization",
                        "Platform engineering/internal developer platforms",
                        "Edge computing with K8s"
                    ]
                }
            }
        ],
        tasks: [
            "Explore existing CRDs (`kubectl get crd`)",
            "Install a simple Operator (e.g., Prometheus Operator)",
            "Create an instance of a Custom Resource",
            "Read about ArgoCD architecture",
            "Simulate GitOps (apply manifest from a Git URL)",
            "Review the 12-Factor App methodology",
            "Explore the CNCF Landscape",
            "Plan a migration path for a legacy app"
        ],
        lab: {
            title: "The Autopilot",
            scenario: "You want a database, but managing backups, failover, and configuration is hard. You want a robot to do it.",
            steps: "Install a Database Operator (like Postgres Operator). Create a simple YAML asking for a 'PostgresCluster'. Watch the Operator automatically spawn the Service, StatefulSet, Secrets, and Backup Jobs without you defining them manually."
        },
        commands: [
            { cmd: "kubectl get crd", desc: "List Custom Definitions" },
            { cmd: "kubectl get all -n <operator-ns>", desc: "See operator resources" },
            { cmd: "kubectl api-resources", desc: "List all available APIs" }
        ],
        resources: [
            { name: "CNCF Landscape", url: "https://landscape.cncf.io/" },
            { name: "Operator Hub", url: "https://operatorhub.io/" },
            { name: "ArgoCD", url: "https://argo-cd.readthedocs.io/en/stable/" }
        ]
    }
];

        // AI Knowledge Base for Concepts
        const aiKnowledgeBase = {
            "pod-basics": {
                explanations: [
                    {
                        level: "beginner",
                        content: "A Pod is like a bubble wrap package for your containers. Inside this bubble, containers can talk to each other easily (they're on localhost) and share storage. But be careful - if the bubble pops (Pod crashes), everything inside is gone!"
                    },
                    {
                        level: "intermediate",
                        content: "Pods provide shared namespaces: network (same IP), IPC (inter-process communication), and optionally volume storage. This is why sidecar patterns work well - a logging container can access the same volumes as the main app container."
                    },
                    {
                        level: "advanced",
                        content: "Pods have a PodSpec that defines containers, volumes, securityContext, and lifecycle hooks. The kubelet on each node monitors Pods via the PodSpec from the API server and ensures the actual state matches desired state."
                    }
                ],
                realWorldScenarios: [
                    {
                        title: "E-commerce App Deployment",
                        problem: "Your e-commerce app needs a main application container and a file upload processor that shares the uploads directory.",
                        solution: "Create a Pod with two containers: main-app and upload-processor. Mount a shared emptyDir volume at /uploads. The main-app writes uploads, upload-processor processes them.",
                        yamlExample: `
apiVersion: v1
kind: Pod
metadata:
  name: ecommerce-app
spec:
  containers:
  - name: main-app
    image: nginx:latest
    volumeMounts:
    - name: upload-storage
      mountPath: /uploads
  - name: upload-processor
    image: python:3.9
    command: ["python", "/app/processor.py"]
    volumeMounts:
    - name: upload-storage
      mountPath: /data/uploads
  volumes:
  - name: upload-storage
    emptyDir: {}`
                    },
                    {
                        title: "Debugging Tool Sidecar",
                        problem: "You need to debug a production Pod without affecting the main application.",
                        solution: "Add an ephemeral debug container using 'kubectl debug'. This creates a temporary container in the Pod with debugging tools.",
                        command: "kubectl debug pod/myapp -it --image=busybox --target=myapp"
                    }
                ],
                commonQuestions: [
                    {
                        q: "Why can't I just run containers directly?",
                        a: "Pods provide the necessary abstractions for Kubernetes to manage containers as a unit - scheduling, scaling, networking, and storage are all coordinated at the Pod level."
                    },
                    {
                        q: "How many containers should I put in a Pod?",
                        a: "Generally, one main container plus helper/sidecar containers that need tight coupling. If containers can be scaled independently, use separate Pods."
                    }
                ]
            },
            "k8s-architecture": {
                explanations: [
                    {
                        level: "beginner",
                        content: "Think of Kubernetes as a smart warehouse manager. The control plane (managers) decides where to put packages (pods), while the workers (forklifts) actually move and run them."
                    },
                    {
                        level: "intermediate",
                        content: "The API Server is the front door - everything goes through it. etcd is the brain's memory storing all cluster data. Scheduler is the planner assigning work. Controllers are the workers making sure reality matches plans."
                    },
                    {
                        level: "advanced",
                        content: "Kubernetes uses a watch-based architecture. Components watch for changes via the API Server and react. This event-driven model allows for the declarative nature - you specify desired state, controllers converge current state to match."
                    }
                ],
                realWorldScenarios: [
                    {
                        title: "High Traffic E-commerce Black Friday",
                        problem: "Your e-commerce site needs to handle 10x traffic during Black Friday sales.",
                        solution: "Scale worker nodes horizontally using cluster autoscaler. Use pod anti-affinity to spread critical pods across nodes. Implement HPA (Horizontal Pod Autoscaler) for automatic scaling.",
                        architecture: "Multi-AZ deployment with 3 master nodes (across zones), auto-scaling node groups, and etcd running on dedicated instances with SSD storage."
                    },
                    {
                        title: "Disaster Recovery Setup",
                        problem: "Need to survive an entire AZ failure.",
                        solution: "Multi-cluster federation with Cluster API. Use Velero for cross-cluster backup/restore. Implement service mesh (Istio) for traffic failover between clusters.",
                        tools: ["Cluster API", "Velero", "Istio", "ExternalDNS"]
                    }
                ]
            }
        };

        // State Management
        let currentState = {
            activeDay: null,
            activeConcept: null,
            completedDays: new Set(),
            completedConcepts: new Set(),
            theme: 'light',
            aiConversations: {},
            userProfile: {
                level: "beginner",
                learningStyle: "hands-on"
            }
        };

        // --- Core Logic ---

        function init() {
            initTheme();
            renderDashboard();
            initAI();
        }

        function initTheme() {
            const toggle = document.getElementById('theme-toggle');
            const icon = document.getElementById('theme-toggle-icon');
            
            // Check saved theme
            if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
                icon.textContent = '‚òÄÔ∏è';
                currentState.theme = 'dark';
            }

            toggle.addEventListener('click', () => {
                if (document.documentElement.classList.contains('dark')) {
                    document.documentElement.classList.remove('dark');
                    localStorage.theme = 'light';
                    icon.textContent = 'üåô';
                    currentState.theme = 'light';
                } else {
                    document.documentElement.classList.add('dark');
                    localStorage.theme = 'dark';
                    icon.textContent = '‚òÄÔ∏è';
                    currentState.theme = 'dark';
                }
                if (currentState.activeDay === null && currentState.activeConcept === null) renderDashboard();
            });
        }

        function initAI() {
            // Initialize AI conversations storage
            k8sData.forEach(day => {
                day.concepts.forEach(concept => {
                    if (!currentState.aiConversations[concept.id]) {
                        currentState.aiConversations[concept.id] = [];
                    }
                });
            });
        }

        // Dashboard Renderer
        function renderDashboard() {
            currentState.activeDay = null;
            currentState.activeConcept = null;
            const app = document.getElementById('app-view');
            const totalConcepts = k8sData.reduce((acc, day) => acc + day.concepts.length, 0);
            const totalTasks = k8sData.reduce((acc, day) => acc + (day.tasks ? day.tasks.length : 0), 0);
            const completedConcepts = currentState.completedConcepts.size;
            
            app.innerHTML = `
                <div class="mb-8 text-center animate-fade-in">
                    <div class="relative inline-block mb-4">
                        <div class="absolute -inset-1 bg-gradient-to-r from-sky-500 to-indigo-500 rounded-full blur opacity-30 animate-pulse-slow"></div>
                        <h1 class="text-3xl sm:text-4xl font-bold text-stone-800 dark:text-stone-100 relative px-6 py-3">Kubernetes Mastery Journey</h1>
                    </div>
                    <p class="text-stone-600 dark:text-stone-400 max-w-2xl mx-auto px-4">Master architecture, networking, and operations through AI-powered structured learning.</p>
                    <div class="mt-6 flex flex-wrap justify-center gap-4">
                        <button onclick="renderAIAssistant()" class="px-4 py-2 bg-gradient-to-r from-sky-500 to-indigo-500 text-white rounded-lg font-medium hover:opacity-90 transition-opacity flex items-center gap-2">
                            <i class="fas fa-robot"></i> AI Assistant
                        </button>
                        <button onclick="renderPracticeProblems()" class="px-4 py-2 bg-gradient-to-r from-emerald-500 to-green-500 text-white rounded-lg font-medium hover:opacity-90 transition-opacity flex items-center gap-2">
                            <i class="fas fa-code"></i> Practice Problems
                        </button>
                    </div>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8">
                    <div class="bg-white dark:bg-stone-900 p-6 rounded-xl shadow-sm border border-stone-200 dark:border-stone-800">
                        <div class="text-sm text-stone-500 dark:text-stone-400 font-medium">Total Days</div>
                        <div class="text-3xl font-bold text-stone-800 dark:text-stone-100">12</div>
                        <div class="mt-2 h-2 bg-stone-100 dark:bg-stone-800 rounded-full overflow-hidden">
                            <div class="h-full bg-sky-500" style="width: ${Math.round((currentState.completedDays.size / 12) * 100)}%"></div>
                        </div>
                        <div class="text-xs text-stone-400 mt-1">${currentState.completedDays.size} completed</div>
                    </div>
                    <div class="bg-white dark:bg-stone-900 p-6 rounded-xl shadow-sm border border-stone-200 dark:border-stone-800">
                        <div class="text-sm text-stone-500 dark:text-stone-400 font-medium">Core Concepts</div>
                        <div class="text-3xl font-bold text-stone-800 dark:text-stone-100">${totalConcepts}</div>
                        <div class="mt-2 h-2 bg-stone-100 dark:bg-stone-800 rounded-full overflow-hidden">
                            <div class="h-full bg-emerald-500" style="width: ${Math.round((completedConcepts / totalConcepts) * 100)}%"></div>
                        </div>
                        <div class="text-xs text-stone-400 mt-1">${completedConcepts} mastered</div>
                    </div>
                    <div class="bg-white dark:bg-stone-900 p-6 rounded-xl shadow-sm border border-stone-200 dark:border-stone-800">
                        <div class="text-sm text-stone-500 dark:text-stone-400 font-medium">Hands-on Tasks</div>
                        <div class="text-3xl font-bold text-stone-800 dark:text-stone-100">${totalTasks}</div>
                        <div class="text-xs text-stone-400 mt-1">Practical exercises</div>
                    </div>
                    <div class="bg-white dark:bg-stone-900 p-6 rounded-xl shadow-sm border border-stone-200 dark:border-stone-800">
                        <div class="text-sm text-stone-500 dark:text-stone-400 font-medium">Learning Level</div>
                        <div class="text-3xl font-bold text-stone-800 dark:text-stone-100 capitalize">${currentState.userProfile.level}</div>
                        <button onclick="changeLearningLevel()" class="text-xs text-sky-600 hover:text-sky-700 mt-2">Change level</button>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8 mb-12">
                    <div class="bg-white dark:bg-stone-900 p-4 sm:p-6 rounded-xl shadow-sm border border-stone-200 dark:border-stone-800">
                        <h3 class="text-lg font-bold text-stone-800 dark:text-stone-100 mb-4 text-center sm:text-left">Daily Curriculum Balance</h3>
                        <div class="chart-container"><canvas id="curriculumChart"></canvas></div>
                    </div>
                    <div class="bg-white dark:bg-stone-900 p-4 sm:p-6 rounded-xl shadow-sm border border-stone-200 dark:border-stone-800">
                        <h3 class="text-lg font-bold text-stone-800 dark:text-stone-100 mb-4 text-center sm:text-left">Skill Domain Focus</h3>
                        <div class="chart-container"><canvas id="domainChart"></canvas></div>
                    </div>
                </div>

                <h2 class="text-2xl font-bold text-stone-800 dark:text-stone-100 mb-6 px-2">Your Learning Path</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-12">
                    ${k8sData.map(day => `
                        <div onclick="renderDay(${day.day})" 
                             class="bg-white dark:bg-stone-900 p-5 rounded-lg border ${currentState.completedDays.has(day.day) ? 'border-sky-500 bg-sky-50 dark:bg-sky-950/20' : 'border-stone-200 dark:border-stone-800'} shadow-sm card-hover cursor-pointer transition-all">
                            <div class="flex justify-between items-start mb-2">
                                <span class="text-xs font-bold uppercase tracking-wider ${currentState.completedDays.has(day.day) ? 'text-sky-600' : 'text-stone-400'}">Day ${day.day}</span>
                                ${currentState.completedDays.has(day.day) ? '‚úÖ' : ''}
                            </div>
                            <h4 class="font-bold text-stone-800 dark:text-stone-100 mb-2 leading-tight">${day.title}</h4>
                            <div class="mt-4 flex items-center gap-2">
                                <span class="px-2 py-1 bg-stone-100 dark:bg-stone-800 text-stone-600 dark:text-stone-400 text-xs rounded font-medium">${day.domain}</span>
                                <span class="text-xs text-stone-400">${day.concepts.length} concepts</span>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            initCharts();
            updateNavProgress();
        }

        function initCharts() {
            const isDark = document.documentElement.classList.contains('dark');
            const textColor = isDark ? '#a8a29e' : '#78716c';
            const gridColor = isDark ? '#292524' : '#e7e5e4';

            const ctx1 = document.getElementById('curriculumChart').getContext('2d');
            new Chart(ctx1, {
                type: 'bar',
                data: {
                    labels: k8sData.map(d => `D${d.day}`),
                    datasets: [
                        { label: 'Concepts', data: k8sData.map(d => d.concepts.length), backgroundColor: isDark ? '#44403c' : '#e7e5e4' },
                        { label: 'Tasks', data: k8sData.map(d => d.tasks ? d.tasks.length : 0), backgroundColor: '#0ea5e9' }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { labels: { color: textColor } } },
                    scales: {
                        x: { stacked: true, grid: { display: false }, ticks: { color: textColor } },
                        y: { stacked: true, grid: { color: gridColor }, ticks: { color: textColor } }
                    }
                }
            });

            const domains = {};
            k8sData.forEach(d => domains[d.domain] = (domains[d.domain] || 0) + 1);
            const ctx2 = document.getElementById('domainChart').getContext('2d');
            new Chart(ctx2, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(domains),
                    datasets: [{
                        data: Object.values(domains),
                        backgroundColor: ['#78716c', '#0ea5e9', '#f59e0b', '#10b981', '#6366f1'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '65%',
                    plugins: { 
                        legend: { position: 'right', labels: { color: textColor, padding: 20 } },
                        tooltip: { callbacks: { label: function(context) { return `${context.label}: ${context.raw} days`; } } }
                    }
                }
            });
        }

        function renderDay(dayId) {
            currentState.activeDay = dayId;
            currentState.activeConcept = null;
            const dayData = k8sData.find(d => d.day === dayId);
            const app = document.getElementById('app-view');
            const isCompleted = currentState.completedDays.has(dayId);

            app.innerHTML = `
                <div class="mb-6 flex flex-col md:flex-row justify-between md:items-center gap-4 animate-fade-in">
                    <div>
                        <button onclick="renderDashboard()" class="text-sm text-stone-500 dark:text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 mb-2 flex items-center gap-1"><i class="fas fa-arrow-left"></i> Back to Dashboard</button>
                        <h2 class="text-2xl sm:text-3xl font-bold text-stone-900 dark:text-stone-100">Day ${dayData.day}: ${dayData.title}</h2>
                        <p class="text-stone-600 dark:text-stone-400 mt-2">${dayData.focus}</p>
                    </div>
                    <div class="flex items-center gap-3">
                        <button onclick="toggleComplete(${dayId})" 
                            class="w-full md:w-auto px-4 py-2 rounded-lg font-medium transition-colors ${isCompleted ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 border border-green-200 dark:border-green-800' : 'bg-stone-800 text-white dark:bg-stone-100 dark:text-stone-900 hover:bg-stone-700 dark:hover:bg-stone-200'}">
                            ${isCompleted ? '<i class="fas fa-check mr-2"></i>Completed' : '<i class="fas fa-flag mr-2"></i>Mark as Complete'}
                        </button>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                    <div class="lg:col-span-2">
                        <div class="bg-gradient-to-r from-sky-50 to-indigo-50 dark:from-sky-950/20 dark:to-indigo-950/20 p-6 rounded-xl mb-6">
                            <h3 class="text-lg font-bold text-stone-800 dark:text-stone-100 mb-3"><i class="fas fa-bullseye mr-2"></i>Today's Focus</h3>
                            <p class="text-stone-700 dark:text-stone-300">${dayData.focus}</p>
                        </div>

                        <h3 class="text-xl font-bold text-stone-800 dark:text-stone-100 mb-4">Core Concepts</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                            ${dayData.concepts.map((concept, index) => `
                                <div onclick="renderConceptDetail('${concept.id}')" 
                                     class="concept-card p-5 rounded-lg border ${currentState.completedConcepts.has(concept.id) ? 'border-emerald-500' : 'border-stone-200 dark:border-stone-800'} shadow-sm card-hover cursor-pointer transition-all">
                                    <div class="flex justify-between items-start mb-3">
                                        <span class="text-xs font-bold uppercase tracking-wider text-sky-600">Concept ${index + 1}</span>
                                        ${currentState.completedConcepts.has(concept.id) ? '<span class="text-xs text-emerald-600"><i class="fas fa-check-circle"></i> Mastered</span>' : ''}
                                    </div>
                                    <h4 class="font-bold text-stone-800 dark:text-stone-100 mb-2">${concept.title}</h4>
                                    <p class="text-sm text-stone-600 dark:text-stone-400 mb-3">${concept.description}</p>
                                    <div class="flex items-center justify-between mt-4">
                                        <span class="text-xs text-stone-400">Click to explore</span>
                                        <button onclick="event.stopPropagation(); askAIAboutConcept('${concept.id}')" class="text-xs text-sky-600 hover:text-sky-700 flex items-center gap-1">
                                            <i class="fas fa-robot"></i> Ask AI
                                        </button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div class="space-y-6">
                        <div class="bg-white dark:bg-stone-900 p-5 rounded-xl border border-stone-200 dark:border-stone-800">
                            <h3 class="text-lg font-bold text-stone-800 dark:text-stone-100 mb-4"><i class="fas fa-tasks mr-2"></i>Quick Actions</h3>
                            <div class="space-y-3">
                                <button onclick="renderPracticeProblems(${dayId})" class="w-full text-left p-3 rounded-lg bg-stone-50 dark:bg-stone-800 hover:bg-stone-100 dark:hover:bg-stone-700 transition-colors flex items-center gap-3">
                                    <div class="w-8 h-8 rounded-full bg-emerald-100 dark:bg-emerald-900 flex items-center justify-center">
                                        <i class="fas fa-code text-emerald-600"></i>
                                    </div>
                                    <div>
                                        <div class="font-medium text-stone-800 dark:text-stone-100">Practice Problems</div>
                                        <div class="text-xs text-stone-400">Test your knowledge</div>
                                    </div>
                                </button>
                                <button onclick="renderRealWorldScenarios(${dayId})" class="w-full text-left p-3 rounded-lg bg-stone-50 dark:bg-stone-800 hover:bg-stone-100 dark:hover:bg-stone-700 transition-colors flex items-center gap-3">
                                    <div class="w-8 h-8 rounded-full bg-amber-100 dark:bg-amber-900 flex items-center justify-center">
                                        <i class="fas fa-globe text-amber-600"></i>
                                    </div>
                                    <div>
                                        <div class="font-medium text-stone-800 dark:text-stone-100">Real World Scenarios</div>
                                        <div class="text-xs text-stone-400">Industry use cases</div>
                                    </div>
                                </button>
                                <button onclick="renderOpenSourceProjects(${dayId})" class="w-full text-left p-3 rounded-lg bg-stone-50 dark:bg-stone-800 hover:bg-stone-100 dark:hover:bg-stone-700 transition-colors flex items-center gap-3">
                                    <div class="w-8 h-8 rounded-full bg-violet-100 dark:bg-violet-900 flex items-center justify-center">
                                        <i class="fab fa-github text-violet-600"></i>
                                    </div>
                                    <div>
                                        <div class="font-medium text-stone-800 dark:text-stone-100">Open Source Projects</div>
                                        <div class="text-xs text-stone-400">Contribute & learn</div>
                                    </div>
                                </button>
                            </div>
                        </div>

                        <div class="bg-white dark:bg-stone-900 p-5 rounded-xl border border-stone-200 dark:border-stone-800">
                            <h3 class="text-lg font-bold text-stone-800 dark:text-stone-100 mb-4"><i class="fas fa-terminal mr-2"></i>Key Commands</h3>
                            <div class="space-y-2">
                                ${dayData.commands.slice(0, 3).map(cmd => `
                                    <div class="font-mono text-sm bg-stone-800 text-stone-100 dark:bg-stone-800 dark:text-stone-300 p-2 rounded">
                                        <span class="text-green-400">$</span> ${cmd.cmd}
                                        <div class="text-xs text-stone-400 mt-1">${cmd.desc}</div>
                                    </div>
                                `).join('')}
                                <button onclick="showAllCommands(${dayId})" class="text-sm text-sky-600 hover:text-sky-700 w-full text-center mt-2">Show all commands</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            updateNavProgress();
        }

        function renderConceptDetail(conceptId) {
            // Find concept across all days
            let conceptData = null;
            let dayData = null;
            
            for (const day of k8sData) {
                const concept = day.concepts.find(c => c.id === conceptId);
                if (concept) {
                    conceptData = concept;
                    dayData = day;
                    break;
                }
            }

            if (!conceptData) return renderDashboard();

            currentState.activeConcept = conceptId;
            const aiData = aiKnowledgeBase[conceptId] || {};
            const isCompleted = currentState.completedConcepts.has(conceptId);

            const app = document.getElementById('app-view');
            app.innerHTML = `
                <div class="mb-6 animate-fade-in">
                    <button onclick="renderDay(${dayData.day})" class="text-sm text-stone-500 dark:text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 mb-4 flex items-center gap-1">
                        <i class="fas fa-arrow-left"></i> Back to Day ${dayData.day}
                    </button>
                    
                    <div class="flex flex-col md:flex-row justify-between md:items-start gap-4 mb-8">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="px-3 py-1 bg-sky-100 dark:bg-sky-900 text-sky-800 dark:text-sky-200 text-xs rounded-full font-medium">Core Concept</span>
                                ${isCompleted ? '<span class="px-3 py-1 bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200 text-xs rounded-full font-medium"><i class="fas fa-check mr-1"></i>Mastered</span>' : ''}
                            </div>
                            <h2 class="text-2xl sm:text-3xl font-bold text-stone-900 dark:text-stone-100 mb-3">${conceptData.title}</h2>
                            <p class="text-lg text-stone-700 dark:text-stone-300 mb-6">${conceptData.description}</p>
                        </div>
                        <div class="flex flex-col gap-2">
                            <button onclick="toggleConceptComplete('${conceptId}')" 
                                class="px-4 py-2 rounded-lg font-medium transition-colors ${isCompleted ? 'bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400' : 'bg-sky-600 text-white hover:bg-sky-700'}">
                                ${isCompleted ? '<i class="fas fa-check-circle mr-2"></i>Mastered' : '<i class="fas fa-graduation-cap mr-2"></i>Mark as Mastered'}
                            </button>
                            <button onclick="askAIAboutConcept('${conceptId}')" class="px-4 py-2 rounded-lg font-medium bg-gradient-to-r from-sky-500 to-indigo-500 text-white hover:opacity-90 transition-opacity">
                                <i class="fas fa-robot mr-2"></i>Ask AI Assistant
                            </button>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <!-- Left Column: Detailed Information -->
                        <div class="lg:col-span-2 space-y-8">
                            <!-- Why It's Important -->
                            <div class="bg-white dark:bg-stone-900 p-6 rounded-xl border border-stone-200 dark:border-stone-800">
                                <h3 class="text-xl font-bold text-stone-800 dark:text-stone-100 mb-4 flex items-center gap-2">
                                    <i class="fas fa-star text-amber-500"></i> Why This Matters
                                </h3>
                                <p class="text-stone-700 dark:text-stone-300 mb-4">${conceptData.details?.whyImportant || 'This concept is fundamental to understanding Kubernetes architecture and operations.'}</p>
                                
                                ${conceptData.details?.realWorldAnalogy ? `
                                <div class="bg-amber-50 dark:bg-amber-900/20 p-4 rounded-lg mt-4">
                                    <h4 class="font-bold text-amber-800 dark:text-amber-300 mb-2"><i class="fas fa-lightbulb mr-2"></i>Real World Analogy</h4>
                                    <p class="text-amber-700 dark:text-amber-400">${conceptData.details.realWorldAnalogy}</p>
                                </div>
                                ` : ''}
                            </div>

                            <!-- Real World Scenarios -->
                            ${aiData.realWorldScenarios ? `
                            <div class="bg-white dark:bg-stone-900 p-6 rounded-xl border border-stone-200 dark:border-stone-800">
                                <h3 class="text-xl font-bold text-stone-800 dark:text-stone-100 mb-4 flex items-center gap-2">
                                    <i class="fas fa-briefcase text-emerald-500"></i> Real World Scenarios
                                </h3>
                                <div class="space-y-6">
                                    ${aiData.realWorldScenarios.map((scenario, idx) => `
                                        <div class="border-l-4 border-emerald-500 pl-4 py-2">
                                            <h4 class="font-bold text-stone-800 dark:text-stone-100 mb-2">${scenario.title}</h4>
                                            <p class="text-stone-600 dark:text-stone-400 mb-3"><strong>Problem:</strong> ${scenario.problem}</p>
                                            <p class="text-stone-700 dark:text-stone-300 mb-3"><strong>Solution:</strong> ${scenario.solution}</p>
                                            ${scenario.yamlExample ? `
                                            <details class="mt-3">
                                                <summary class="cursor-pointer text-sm text-sky-600 hover:text-sky-700">View YAML Example</summary>
                                                <pre class="mt-2 font-mono text-xs bg-stone-800 text-stone-100 dark:bg-stone-900 dark:text-stone-300 p-4 rounded overflow-x-auto">${scenario.yamlExample}</pre>
                                            </details>
                                            ` : ''}
                                            ${scenario.command ? `
                                            <div class="mt-3 font-mono text-sm bg-stone-800 text-stone-100 dark:bg-stone-900 dark:text-stone-300 p-3 rounded">
                                                <span class="text-green-400">$</span> ${scenario.command}
                                            </div>
                                            ` : ''}
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            ` : ''}

                            <!-- Open Source Projects -->
                            ${conceptData.details?.openSourceProjects ? `
                            <div class="bg-white dark:bg-stone-900 p-6 rounded-xl border border-stone-200 dark:border-stone-800">
                                <h3 class="text-xl font-bold text-stone-800 dark:text-stone-100 mb-4 flex items-center gap-2">
                                    <i class="fab fa-github text-violet-500"></i> Open Source Projects
                                </h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    ${conceptData.details.openSourceProjects.map(project => `
                                        <a href="${project.url}" target="_blank" 
                                           class="block p-4 rounded-lg border border-stone-200 dark:border-stone-800 hover:border-violet-500 dark:hover:border-violet-500 transition-colors group">
                                            <div class="flex items-start gap-3">
                                                <div class="w-10 h-10 rounded-lg bg-violet-100 dark:bg-violet-900 flex items-center justify-center group-hover:bg-violet-200 dark:group-hover:bg-violet-800 transition-colors">
                                                    <i class="fab fa-github text-violet-600 dark:text-violet-400"></i>
                                                </div>
                                                <div>
                                                    <h4 class="font-bold text-stone-800 dark:text-stone-100 group-hover:text-violet-600 dark:group-hover:text-violet-400 transition-colors">${project.name}</h4>
                                                    <p class="text-sm text-stone-600 dark:text-stone-400 mt-1">${project.description}</p>
                                                    <div class="text-xs text-stone-400 mt-2 flex items-center gap-1">
                                                        <i class="fas fa-external-link-alt"></i> Explore project
                                                    </div>
                                                </div>
                                            </div>
                                        </a>
                                    `).join('')}
                                </div>
                            </div>
                            ` : ''}
                        </div>

                        <!-- Right Column: AI Assistant & Quick Info -->
                        <div class="space-y-8">
                            <!-- AI Assistant Chat -->
                            <div class="bg-gradient-to-b from-sky-50 to-white dark:from-sky-950/20 dark:to-stone-900 p-6 rounded-xl border border-sky-200 dark:border-sky-800">
                                <div class="flex items-center gap-3 mb-6">
                                    <div class="relative">
                                        <div class="w-12 h-12 rounded-full bg-gradient-to-r from-sky-500 to-indigo-500 flex items-center justify-center">
                                            <i class="fas fa-robot text-white text-xl"></i>
                                        </div>
                                        <div class="absolute -top-1 -right-1 w-5 h-5 bg-emerald-500 rounded-full flex items-center justify-center">
                                            <i class="fas fa-bolt text-white text-xs"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <h3 class="font-bold text-stone-800 dark:text-stone-100">AI Assistant</h3>
                                        <p class="text-sm text-stone-600 dark:text-stone-400">Ask me anything about ${conceptData.title}</p>
                                    </div>
                                </div>
                                
                                <div id="ai-chat-container" class="space-y-4 max-h-96 overflow-y-auto mb-4">
                                    ${renderAIChat(conceptId)}
                                </div>
                                
                                <div class="flex gap-2">
                                    <input type="text" id="ai-question-input" 
                                           placeholder="Ask about ${conceptData.title}..."
                                           class="flex-1 px-4 py-2 rounded-lg border border-stone-300 dark:border-stone-700 bg-white dark:bg-stone-900 focus:outline-none focus:ring-2 focus:ring-sky-500">
                                    <button onclick="sendAIQuestion('${conceptId}')" class="px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 transition-colors">
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                </div>
                                <div class="mt-3 grid grid-cols-2 gap-2">
                                    <button onclick="askAIQuestion('${conceptId}', 'Give me a beginner example')" class="text-xs px-3 py-1 bg-stone-100 dark:bg-stone-800 text-stone-700 dark:text-stone-300 rounded hover:bg-stone-200 dark:hover:bg-stone-700 transition-colors">
                                        Beginner Example
                                    </button>
                                    <button onclick="askAIQuestion('${conceptId}', 'Common pitfalls to avoid')" class="text-xs px-3 py-1 bg-stone-100 dark:bg-stone-800 text-stone-700 dark:text-stone-300 rounded hover:bg-stone-200 dark:hover:bg-stone-700 transition-colors">
                                        Common Pitfalls
                                    </button>
                                </div>
                            </div>

                            <!-- Quick Reference -->
                            <div class="bg-white dark:bg-stone-900 p-6 rounded-xl border border-stone-200 dark:border-stone-800">
                                <h3 class="text-lg font-bold text-stone-800 dark:text-stone-100 mb-4">Quick Reference</h3>
                                
                                ${conceptData.details?.commonMisconceptions ? `
                                <div class="mb-6">
                                    <h4 class="font-medium text-stone-700 dark:text-stone-300 mb-2 flex items-center gap-2">
                                        <i class="fas fa-exclamation-triangle text-amber-500"></i> Common Misconceptions
                                    </h4>
                                    <ul class="space-y-2">
                                        ${conceptData.details.commonMisconceptions.map(misconception => `
                                            <li class="text-sm text-stone-600 dark:text-stone-400 flex items-start gap-2">
                                                <i class="fas fa-times text-red-500 mt-1"></i>
                                                <span>${misconception}</span>
                                            </li>
                                        `).join('')}
                                    </ul>
                                </div>
                                ` : ''}

                                ${conceptData.tasks ? `
                                <div>
                                    <h4 class="font-medium text-stone-700 dark:text-stone-300 mb-2 flex items-center gap-2">
                                        <i class="fas fa-check-circle text-emerald-500"></i> Practice Tasks
                                    </h4>
                                    <div class="space-y-2">
                                        ${conceptData.tasks.map(task => `
                                            <label class="flex items-start gap-2">
                                                <input type="checkbox" class="mt-1 text-sky-600 rounded border-stone-300">
                                                <span class="text-sm text-stone-600 dark:text-stone-400">${task}</span>
                                            </label>
                                        `).join('')}
                                    </div>
                                </div>
                                ` : ''}
                            </div>

                            <!-- Related Resources -->
                            <div class="bg-white dark:bg-stone-900 p-6 rounded-xl border border-stone-200 dark:border-stone-800">
                                <h3 class="text-lg font-bold text-stone-800 dark:text-stone-100 mb-4">Related Resources</h3>
                                <div class="space-y-3">
                                    <a href="https://kubernetes.io/docs/concepts/" target="_blank" 
                                       class="flex items-center gap-3 p-3 rounded-lg hover:bg-stone-50 dark:hover:bg-stone-800 transition-colors group">
                                        <div class="w-10 h-10 rounded-lg bg-sky-100 dark:bg-sky-900 flex items-center justify-center">
                                            <i class="fas fa-book text-sky-600"></i>
                                        </div>
                                        <div>
                                            <div class="font-medium text-stone-800 dark:text-stone-100 group-hover:text-sky-600">Official Docs</div>
                                            <div class="text-xs text-stone-400">Kubernetes Concepts</div>
                                        </div>
                                    </a>
                                    <a href="https://github.com/kubernetes/kubernetes" target="_blank" 
                                       class="flex items-center gap-3 p-3 rounded-lg hover:bg-stone-50 dark:hover:bg-stone-800 transition-colors group">
                                        <div class="w-10 h-10 rounded-lg bg-violet-100 dark:bg-violet-900 flex items-center justify-center">
                                            <i class="fab fa-github text-violet-600"></i>
                                        </div>
                                        <div>
                                            <div class="font-medium text-stone-800 dark:text-stone-100 group-hover:text-violet-600">Source Code</div>
                                            <div class="text-xs text-stone-400">Kubernetes GitHub</div>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            updateNavProgress();
        }

        function renderAIChat(conceptId) {
            const conversations = currentState.aiConversations[conceptId] || [];
            const aiData = aiKnowledgeBase[conceptId];
            
            let chatHTML = '';
            
            // Add initial greeting if no conversations
            if (conversations.length === 0 && aiData?.explanations) {
                const userLevel = currentState.userProfile.level;
                const explanation = aiData.explanations.find(e => e.level === userLevel) || aiData.explanations[0];
                
                chatHTML += `
                    <div class="ai-chat-bubble bg-sky-100 dark:bg-sky-900/30 p-4">
                        <div class="flex items-center gap-2 mb-2">
                            <div class="w-6 h-6 rounded-full bg-gradient-to-r from-sky-500 to-indigo-500 flex items-center justify-center">
                                <i class="fas fa-robot text-white text-xs"></i>
                            </div>
                            <span class="font-medium text-sm text-stone-700 dark:text-stone-300">AI Assistant</span>
                        </div>
                        <p class="text-stone-700 dark:text-stone-300">${explanation.content}</p>
                        <div class="mt-2 text-xs text-stone-500">Level: ${userLevel}</div>
                    </div>
                `;
            }
            
            // Render existing conversations
            conversations.forEach(msg => {
                if (msg.role === 'user') {
                    chatHTML += `
                        <div class="user-chat-bubble bg-stone-800 text-stone-100 dark:bg-stone-700 dark:text-stone-300 p-4">
                            <div class="flex items-center gap-2 mb-2 justify-end">
                                <span class="font-medium text-sm">You</span>
                                <div class="w-6 h-6 rounded-full bg-stone-600 flex items-center justify-center">
                                    <i class="fas fa-user text-white text-xs"></i>
                                </div>
                            </div>
                            <p>${msg.content}</p>
                        </div>
                    `;
                } else {
                    chatHTML += `
                        <div class="ai-chat-bubble bg-sky-100 dark:bg-sky-900/30 p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <div class="w-6 h-6 rounded-full bg-gradient-to-r from-sky-500 to-indigo-500 flex items-center justify-center">
                                    <i class="fas fa-robot text-white text-xs"></i>
                                </div>
                                <span class="font-medium text-sm text-stone-700 dark:text-stone-300">AI Assistant</span>
                            </div>
                            <p class="text-stone-700 dark:text-stone-300">${msg.content}</p>
                        </div>
                    `;
                }
            });
            
            return chatHTML;
        }

        function sendAIQuestion(conceptId) {
            const input = document.getElementById('ai-question-input');
            const question = input.value.trim();
            if (!question) return;
            
            // Add user message
            if (!currentState.aiConversations[conceptId]) {
                currentState.aiConversations[conceptId] = [];
            }
            currentState.aiConversations[conceptId].push({
                role: 'user',
                content: question,
                timestamp: new Date().toISOString()
            });
            
            // Clear input
            input.value = '';
            
            // Generate AI response (simulated)
            setTimeout(() => {
                const aiResponse = generateAIResponse(conceptId, question);
                currentState.aiConversations[conceptId].push({
                    role: 'assistant',
                    content: aiResponse,
                    timestamp: new Date().toISOString()
                });
                
                // Update chat display
                const chatContainer = document.getElementById('ai-chat-container');
                if (chatContainer) {
                    chatContainer.innerHTML = renderAIChat(conceptId);
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }
            }, 1000);
            
            // Update chat immediately
            const chatContainer = document.getElementById('ai-chat-container');
            if (chatContainer) {
                chatContainer.innerHTML = renderAIChat(conceptId);
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }
        }

        function generateAIResponse(conceptId, question) {
            const aiData = aiKnowledgeBase[conceptId];
            const userLevel = currentState.userProfile.level;
            
            // Check for common questions
            if (aiData?.commonQuestions) {
                const lowerQuestion = question.toLowerCase();
                for (const qa of aiData.commonQuestions) {
                    if (lowerQuestion.includes(qa.q.toLowerCase().split(' ')[0])) {
                        return qa.a;
                    }
                }
            }
            
            // Check for real world scenarios
            if (aiData?.realWorldScenarios && question.toLowerCase().includes('example')) {
                const scenario = aiData.realWorldScenarios[0];
                return `Here's a real-world example:\n\n**${scenario.title}**\n\nProblem: ${scenario.problem}\n\nSolution: ${scenario.solution}`;
            }
            
            // Generate generic response based on level
            const levelResponses = {
                beginner: `In simple terms, this concept is about... Let me give you a practical example you can try.`,
                intermediate: `From an intermediate perspective, this involves... Here are some best practices to follow.`,
                advanced: `At an advanced level, this concept involves... Consider these optimization techniques.`
            };
            
            return levelResponses[userLevel] || `I understand you're asking about "${question}". This is a key concept in Kubernetes that helps with...`;
        }

        function askAIQuestion(conceptId, question) {
            const input = document.getElementById('ai-question-input');
            input.value = question;
            sendAIQuestion(conceptId);
        }

        function askAIAboutConcept(conceptId) {
            renderConceptDetail(conceptId);
            setTimeout(() => {
                const question = `Explain ${conceptId} at ${currentState.userProfile.level} level`;
                askAIQuestion(conceptId, question);
            }, 500);
        }

        function renderAIAssistant() {
            const app = document.getElementById('app-view');
            app.innerHTML = `
                <div class="animate-fade-in">
                    <button onclick="renderDashboard()" class="text-sm text-stone-500 dark:text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 mb-6 flex items-center gap-1">
                        <i class="fas fa-arrow-left"></i> Back to Dashboard
                    </button>
                    
                    <div class="flex flex-col lg:flex-row gap-8">
                        <div class="lg:w-2/3">
                            <div class="bg-gradient-to-r from-sky-500 to-indigo-500 rounded-2xl p-8 text-white mb-8">
                                <div class="flex items-center gap-4 mb-6">
                                    <div class="relative">
                                        <div class="w-20 h-20 rounded-full bg-white/20 flex items-center justify-center">
                                            <i class="fas fa-robot text-3xl"></i>
                                        </div>
                                        <div class="absolute -bottom-2 -right-2 w-10 h-10 bg-emerald-500 rounded-full flex items-center justify-center animate-pulse">
                                            <i class="fas fa-bolt text-white"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <h1 class="text-3xl font-bold">Kubernetes AI Assistant</h1>
                                        <p class="opacity-90">Your personal guide to mastering Kubernetes concepts</p>
                                    </div>
                                </div>
                                <p class="text-lg">Ask me anything about Kubernetes architecture, deployment strategies, troubleshooting, or best practices.</p>
                            </div>
                            
                            <div class="bg-white dark:bg-stone-900 rounded-xl border border-stone-200 dark:border-stone-800 p-6 mb-8">
                                <h2 class="text-xl font-bold text-stone-800 dark:text-stone-100 mb-4">Common Questions</h2>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <button onclick="askAIGeneral('How do I debug a CrashLoopBackOff?')" class="text-left p-4 rounded-lg border border-stone-200 dark:border-stone-800 hover:border-sky-500 hover:bg-sky-50 dark:hover:bg-sky-950/20 transition-colors">
                                        <div class="flex items-center gap-3">
                                            <div class="w-10 h-10 rounded-lg bg-red-100 dark:bg-red-900 flex items-center justify-center">
                                                <i class="fas fa-bug text-red-600"></i>
                                            </div>
                                            <div>
                                                <div class="font-medium text-stone-800 dark:text-stone-100">Debug CrashLoopBackOff</div>
                                                <div class="text-sm text-stone-400">Troubleshooting guide</div>
                                            </div>
                                        </div>
                                    </button>
                                    <button onclick="askAIGeneral('Best practices for ConfigMaps vs Secrets')" class="text-left p-4 rounded-lg border border-stone-200 dark:border-stone-800 hover:border-sky-500 hover:bg-sky-50 dark:hover:bg-sky-950/20 transition-colors">
                                        <div class="flex items-center gap-3">
                                            <div class="w-10 h-10 rounded-lg bg-amber-100 dark:bg-amber-900 flex items-center justify-center">
                                                <i class="fas fa-shield-alt text-amber-600"></i>
                                            </div>
                                            <div>
                                                <div class="font-medium text-stone-800 dark:text-stone-100">ConfigMaps vs Secrets</div>
                                                <div class="text-sm text-stone-400">Security best practices</div>
                                            </div>
                                        </div>
                                    </button>
                                    <button onclick="askAIGeneral('How to implement auto-scaling?')" class="text-left p-4 rounded-lg border border-stone-200 dark:border-stone-800 hover:border-sky-500 hover:bg-sky-50 dark:hover:bg-sky-950/20 transition-colors">
                                        <div class="flex items-center gap-3">
                                            <div class="w-10 h-10 rounded-lg bg-emerald-100 dark:bg-emerald-900 flex items-center justify-center">
                                                <i class="fas fa-expand-arrows-alt text-emerald-600"></i>
                                            </div>
                                            <div>
                                                <div class="font-medium text-stone-800 dark:text-stone-100">Auto-scaling Setup</div>
                                                <div class="text-sm text-stone-400">Horizontal & vertical scaling</div>
                                            </div>
                                        </div>
                                    </button>
                                    <button onclick="askAIGeneral('Networking patterns in Kubernetes')" class="text-left p-4 rounded-lg border border-stone-200 dark:border-stone-800 hover:border-sky-500 hover:bg-sky-50 dark:hover:bg-sky-950/20 transition-colors">
                                        <div class="flex items-center gap-3">
                                            <div class="w-10 h-10 rounded-lg bg-violet-100 dark:bg-violet-900 flex items-center justify-center">
                                                <i class="fas fa-network-wired text-violet-600"></i>
                                            </div>
                                            <div>
                                                <div class="font-medium text-stone-800 dark:text-stone-100">Networking Patterns</div>
                                                <div class="text-sm text-stone-400">Service mesh & ingress</div>
                                            </div>
                                        </div>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="lg:w-1/3">
                            <div class="sticky top-24 space-y-6">
                                <div class="bg-white dark:bg-stone-900 rounded-xl border border-stone-200 dark:border-stone-800 p-6">
                                    <h3 class="text-lg font-bold text-stone-800 dark:text-stone-100 mb-4">Learning Settings</h3>
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 dark:text-stone-300 mb-2">Your Level</label>
                                            <div class="flex gap-2">
                                                ${['beginner', 'intermediate', 'advanced'].map(level => `
                                                    <button onclick="setLearningLevel('${level}')" 
                                                            class="flex-1 px-3 py-2 rounded text-sm font-medium ${currentState.userProfile.level === level ? 'bg-sky-600 text-white' : 'bg-stone-100 dark:bg-stone-800 text-stone-700 dark:text-stone-300'}">
                                                        ${level.charAt(0).toUpperCase() + level.slice(1)}
                                                    </button>
                                                `).join('')}
                                            </div>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 dark:text-stone-300 mb-2">Learning Style</label>
                                            <div class="flex gap-2">
                                                ${['hands-on', 'visual', 'theoretical'].map(style => `
                                                    <button onclick="setLearningStyle('${style}')" 
                                                            class="flex-1 px-3 py-2 rounded text-sm font-medium ${currentState.userProfile.learningStyle === style ? 'bg-emerald-600 text-white' : 'bg-stone-100 dark:bg-stone-800 text-stone-700 dark:text-stone-300'}">
                                                        ${style.charAt(0).toUpperCase() + style.slice(1)}
                                                    </button>
                                                `).join('')}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-gradient-to-b from-sky-50 to-white dark:from-sky-950/20 dark:to-stone-900 p-6 rounded-xl border border-sky-200 dark:border-sky-800">
                                    <h3 class="text-lg font-bold text-stone-800 dark:text-stone-100 mb-4">Quick Ask</h3>
                                    <div class="space-y-3">
                                        <input type="text" id="general-ai-question" 
                                               placeholder="Type your Kubernetes question..."
                                               class="w-full px-4 py-2 rounded-lg border border-stone-300 dark:border-stone-700 bg-white dark:bg-stone-900 focus:outline-none focus:ring-2 focus:ring-sky-500">
                                        <button onclick="askGeneralAI()" class="w-full py-2 bg-gradient-to-r from-sky-500 to-indigo-500 text-white rounded-lg font-medium hover:opacity-90 transition-opacity">
                                            <i class="fas fa-paper-plane mr-2"></i> Ask AI
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function askAIGeneral(question) {
            // For now, just show a placeholder response
            alert(`AI Assistant: I'd be happy to help with "${question}". In the full implementation, this would connect to an AI API like OpenAI or a custom Kubernetes knowledge base.`);
        }

        function askGeneralAI() {
            const input = document.getElementById('general-ai-question');
            const question = input.value.trim();
            if (question) {
                askAIGeneral(question);
                input.value = '';
            }
        }

        function setLearningLevel(level) {
            currentState.userProfile.level = level;
            localStorage.setItem('k8sUserProfile', JSON.stringify(currentState.userProfile));
            if (document.getElementById('app-view').innerHTML.includes('AI Assistant')) {
                renderAIAssistant();
            }
        }

        function setLearningStyle(style) {
            currentState.userProfile.learningStyle = style;
            localStorage.setItem('k8sUserProfile', JSON.stringify(currentState.userProfile));
            if (document.getElementById('app-view').innerHTML.includes('AI Assistant')) {
                renderAIAssistant();
            }
        }

        function changeLearningLevel() {
            const newLevel = prompt('Enter your learning level (beginner/intermediate/advanced):', currentState.userProfile.level);
            if (newLevel && ['beginner', 'intermediate', 'advanced'].includes(newLevel)) {
                setLearningLevel(newLevel);
                renderDashboard();
            }
        }

        function toggleComplete(dayId) {
            if (currentState.completedDays.has(dayId)) {
                currentState.completedDays.delete(dayId);
            } else {
                currentState.completedDays.add(dayId);
            }
            localStorage.setItem('k8sCompletedDays', JSON.stringify([...currentState.completedDays]));
            renderDay(dayId);
        }

        function toggleConceptComplete(conceptId) {
            if (currentState.completedConcepts.has(conceptId)) {
                currentState.completedConcepts.delete(conceptId);
            } else {
                currentState.completedConcepts.add(conceptId);
            }
            localStorage.setItem('k8sCompletedConcepts', JSON.stringify([...currentState.completedConcepts]));
            renderConceptDetail(conceptId);
        }

        function renderPracticeProblems(dayId = null) {
            const app = document.getElementById('app-view');
            app.innerHTML = `
                <div class="animate-fade-in">
                    <button onclick="${dayId ? `renderDay(${dayId})` : 'renderDashboard()'}" class="text-sm text-stone-500 dark:text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 mb-6 flex items-center gap-1">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    
                    <h1 class="text-3xl font-bold text-stone-900 dark:text-stone-100 mb-2">Practice Problems</h1>
                    <p class="text-stone-600 dark:text-stone-400 mb-8">Test your Kubernetes knowledge with real-world scenarios</p>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white dark:bg-stone-900 p-6 rounded-xl border border-stone-200 dark:border-stone-800">
                            <h3 class="text-xl font-bold text-stone-800 dark:text-stone-100 mb-4 flex items-center gap-2">
                                <i class="fas fa-code text-emerald-500"></i> Beginner Problems
                            </h3>
                            <div class="space-y-4">
                                <div class="p-4 border-l-4 border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20">
                                    <h4 class="font-bold text-stone-800 dark:text-stone-100">Problem 1: Pod Creation</h4>
                                    <p class="text-stone-600 dark:text-stone-400 mt-1">Create a Pod running nginx:1.19 with resource limits of 256Mi memory and 0.5 CPU.</p>
                                    <button onclick="showSolution('pod-creation')" class="text-sm text-emerald-600 hover:text-emerald-700 mt-2">View Solution</button>
                                </div>
                                <div class="p-4 border-l-4 border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20">
                                    <h4 class="font-bold text-stone-800 dark:text-stone-100">Problem 2: Service Discovery</h4>
                                    <p class="text-stone-600 dark:text-stone-400 mt-1">Create a Service that exposes your nginx Pod on port 80 and verify connectivity.</p>
                                    <button onclick="showSolution('service-discovery')" class="text-sm text-emerald-600 hover:text-emerald-700 mt-2">View Solution</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-stone-900 p-6 rounded-xl border border-stone-200 dark:border-stone-800">
                            <h3 class="text-xl font-bold text-stone-800 dark:text-stone-100 mb-4 flex items-center gap-2">
                                <i class="fas fa-cogs text-amber-500"></i> Intermediate Problems
                            </h3>
                            <div class="space-y-4">
                                <div class="p-4 border-l-4 border-amber-500 bg-amber-50 dark:bg-amber-900/20">
                                    <h4 class="font-bold text-stone-800 dark:text-stone-100">Problem 3: Rolling Update</h4>
                                    <p class="text-stone-600 dark:text-stone-400 mt-1">Perform a rolling update of a Deployment from nginx:1.19 to nginx:1.20 with zero downtime.</p>
                                    <button onclick="showSolution('rolling-update')" class="text-sm text-amber-600 hover:text-amber-700 mt-2">View Solution</button>
                                </div>
                                <div class="p-4 border-l-4 border-amber-500 bg-amber-50 dark:bg-amber-900/20">
                                    <h4 class="font-bold text-stone-800 dark:text-stone-100">Problem 4: ConfigMap Injection</h4>
                                    <p class="text-stone-600 dark:text-stone-400 mt-1">Create a ConfigMap and inject it into a Pod as both environment variables and mounted files.</p>
                                    <button onclick="showSolution('configmap-injection')" class="text-sm text-amber-600 hover:text-amber-700 mt-2">View Solution</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function showSolution(problemId) {
            const solutions = {
                'pod-creation': `apiVersion: v1
kind: Pod
metadata:
  name: nginx-pod
spec:
  containers:
  - name: nginx
    image: nginx:1.19
    resources:
      requests:
        memory: "256Mi"
        cpu: "0.5"
      limits:
        memory: "256Mi"
        cpu: "0.5"`,
                'service-discovery': `apiVersion: v1
kind: Service
metadata:
  name: nginx-service
spec:
  selector:
    app: nginx
  ports:
  - port: 80
    targetPort: 80
  type: ClusterIP`,
                'rolling-update': `kubectl set image deployment/nginx-deployment nginx=nginx:1.20
kubectl rollout status deployment/nginx-deployment`,
                'configmap-injection': `apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  APP_COLOR: blue
  APP_MODE: production
---
apiVersion: v1
kind: Pod
metadata:
  name: config-pod
spec:
  containers:
  - name: app
    image: nginx
    env:
    - name: APP_COLOR
      valueFrom:
        configMapKeyRef:
          name: app-config
          key: APP_COLOR
    volumeMounts:
    - name: config-volume
      mountPath: /etc/config
  volumes:
  - name: config-volume
    configMap:
      name: app-config`
            };
            
            alert(`Solution for ${problemId}:\n\n${solutions[problemId] || 'Solution not available'}`);
        }

        function renderRealWorldScenarios(dayId = null) {
            const app = document.getElementById('app-view');
            app.innerHTML = `
                <div class="animate-fade-in">
                    <button onclick="${dayId ? `renderDay(${dayId})` : 'renderDashboard()'}" class="text-sm text-stone-500 dark:text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 mb-6 flex items-center gap-1">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    
                    <h1 class="text-3xl font-bold text-stone-900 dark:text-stone-100 mb-2">Real World Scenarios</h1>
                    <p class="text-stone-600 dark:text-stone-400 mb-8">Industry use cases and production patterns</p>
                    
                    <div class="space-y-6">
                        <div class="bg-white dark:bg-stone-900 p-6 rounded-xl border border-stone-200 dark:border-stone-800">
                            <div class="flex items-start gap-4">
                                <div class="w-12 h-12 rounded-lg bg-blue-100 dark:bg-blue-900 flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-shopping-cart text-blue-600 text-xl"></i>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-stone-800 dark:text-stone-100 mb-2">E-commerce Platform</h3>
                                    <p class="text-stone-600 dark:text-stone-400 mb-4">Scalable microservices architecture handling Black Friday traffic spikes</p>
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div class="p-3 bg-stone-50 dark:bg-stone-800 rounded">
                                            <div class="font-medium text-stone-800 dark:text-stone-100">Challenge</div>
                                            <div class="text-sm text-stone-600 dark:text-stone-400">Handle 100x traffic increase during sales</div>
                                        </div>
                                        <div class="p-3 bg-stone-50 dark:bg-stone-800 rounded">
                                            <div class="font-medium text-stone-800 dark:text-stone-100">Solution</div>
                                            <div class="text-sm text-stone-600 dark:text-stone-400">HPA + Cluster Autoscaler + Readiness Probes</div>
                                        </div>
                                        <div class="p-3 bg-stone-50 dark:bg-stone-800 rounded">
                                            <div class="font-medium text-stone-800 dark:text-stone-100">Tools</div>
                                            <div class="text-sm text-stone-600 dark:text-stone-400">Prometheus, Keda, Istio</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-stone-900 p-6 rounded-xl border border-stone-200 dark:border-stone-800">
                            <div class="flex items-start gap-4">
                                <div class="w-12 h-12 rounded-lg bg-green-100 dark:bg-green-900 flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-heartbeat text-green-600 text-xl"></i>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-stone-800 dark:text-stone-100 mb-2">Healthcare Application</h3>
                                    <p class="text-stone-600 dark:text-stone-400 mb-4">HIPAA-compliant patient data processing with high availability</p>
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div class="p-3 bg-stone-50 dark:bg-stone-800 rounded">
                                            <div class="font-medium text-stone-800 dark:text-stone-100">Challenge</div>
                                            <div class="text-sm text-stone-600 dark:text-stone-400">Data encryption & compliance requirements</div>
                                        </div>
                                        <div class="p-3 bg-stone-50 dark:bg-stone-800 rounded">
                                            <div class="font-medium text-stone-800 dark:text-stone-100">Solution</div>
                                            <div class="text-sm text-stone-600 dark:text-stone-400">Encrypted PVCs + Network Policies + RBAC</div>
                                        </div>
                                        <div class="p-3 bg-stone-50 dark:bg-stone-800 rounded">
                                            <div class="font-medium text-stone-800 dark:text-stone-100">Tools</div>
                                            <div class="text-sm text-stone-600 dark:text-stone-400">Sealed Secrets, Cilium, OPA Gatekeeper</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderOpenSourceProjects(dayId = null) {
            const app = document.getElementById('app-view');
            app.innerHTML = `
                <div class="animate-fade-in">
                    <button onclick="${dayId ? `renderDay(${dayId})` : 'renderDashboard()'}" class="text-sm text-stone-500 dark:text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 mb-6 flex items-center gap-1">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    
                    <h1 class="text-3xl font-bold text-stone-900 dark:text-stone-100 mb-2">Open Source Projects</h1>
                    <p class="text-stone-600 dark:text-stone-400 mb-8">Contribute and learn from real Kubernetes ecosystem projects</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        ${[
                            { name: "Kubernetes", stars: "98k", description: "Production-Grade Container Scheduling and Management", url: "https://github.com/kubernetes/kubernetes", difficulty: "Advanced" },
                            { name: "Helm", stars: "24k", description: "The Kubernetes Package Manager", url: "https://github.com/helm/helm", difficulty: "Intermediate" },
                            { name: "ArgoCD", stars: "13k", description: "Declarative GitOps CD for Kubernetes", url: "https://github.com/argoproj/argo-cd", difficulty: "Intermediate" },
                            { name: "Prometheus", stars: "48k", description: "Monitoring & alerting toolkit", url: "https://github.com/prometheus/prometheus", difficulty: "Intermediate" },
                            { name: "Fluentd", stars: "12k", description: "Unified Logging Layer", url: "https://github.com/fluent/fluentd", difficulty: "Beginner" },
                            { name: "Cert Manager", stars: "10k", description: "Automated TLS certificate management", url: "https://github.com/cert-manager/cert-manager", difficulty: "Intermediate" }
                        ].map(project => `
                            <a href="${project.url}" target="_blank" class="block group">
                                <div class="bg-white dark:bg-stone-900 p-6 rounded-xl border border-stone-200 dark:border-stone-800 hover:border-sky-500 dark:hover:border-sky-500 hover:shadow-lg transition-all h-full">
                                    <div class="flex justify-between items-start mb-4">
                                        <div class="w-12 h-12 rounded-lg bg-gradient-to-r from-sky-100 to-indigo-100 dark:from-sky-900 dark:to-indigo-900 flex items-center justify-center group-hover:scale-110 transition-transform">
                                            <i class="fab fa-github text-xl text-stone-800 dark:text-stone-200"></i>
                                        </div>
                                        <span class="px-2 py-1 text-xs rounded-full ${project.difficulty === 'Beginner' ? 'bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-300' : project.difficulty === 'Intermediate' ? 'bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-300' : 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300'}">${project.difficulty}</span>
                                    </div>
                                    <h3 class="font-bold text-stone-800 dark:text-stone-100 mb-2 group-hover:text-sky-600 dark:group-hover:text-sky-400 transition-colors">${project.name}</h3>
                                    <p class="text-sm text-stone-600 dark:text-stone-400 mb-4">${project.description}</p>
                                    <div class="flex items-center justify-between mt-4">
                                        <div class="flex items-center gap-1 text-stone-500 text-sm">
                                            <i class="fas fa-star"></i>
                                            <span>${project.stars}</span>
                                        </div>
                                        <div class="text-sky-600 group-hover:text-sky-700 text-sm flex items-center gap-1">
                                            <span>Explore</span>
                                            <i class="fas fa-arrow-right"></i>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function updateNavProgress() {
            const display = document.getElementById('progress-display');
            if (display) {
                if (currentState.activeDay) {
                    display.textContent = `Day ${currentState.activeDay}/12`;
                } else if (currentState.activeConcept) {
                    display.textContent = `Concept Detail`;
                } else {
                    display.textContent = `Dashboard`;
                }
            }
        }

        // Load saved state
        function loadSavedState() {
            const savedDays = localStorage.getItem('k8sCompletedDays');
            const savedConcepts = localStorage.getItem('k8sCompletedConcepts');
            const savedProfile = localStorage.getItem('k8sUserProfile');
            
            if (savedDays) currentState.completedDays = new Set(JSON.parse(savedDays));
            if (savedConcepts) currentState.completedConcepts = new Set(JSON.parse(savedConcepts));
            if (savedProfile) currentState.userProfile = JSON.parse(savedProfile);
        }

        // Initialize
        loadSavedState();
        init();

        // Export functions to window
        window.renderDashboard = renderDashboard;
        window.renderDay = renderDay;
        window.renderConceptDetail = renderConceptDetail;
        window.renderAIAssistant = renderAIAssistant;
        window.renderPracticeProblems = renderPracticeProblems;
        window.renderRealWorldScenarios = renderRealWorldScenarios;
        window.renderOpenSourceProjects = renderOpenSourceProjects;
        window.toggleComplete = toggleComplete;
        window.toggleConceptComplete = toggleConceptComplete;
        window.askAIAboutConcept = askAIAboutConcept;
        window.sendAIQuestion = sendAIQuestion;
        window.askAIQuestion = askAIQuestion;
        window.askAIGeneral = askAIGeneral;
        window.askGeneralAI = askGeneralAI;
        window.setLearningLevel = setLearningLevel;
        window.setLearningStyle = setLearningStyle;
        window.changeLearningLevel = changeLearningLevel;
        window.showSolution = showSolution;
    </script>
</body>
</html>
