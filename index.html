<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K8s</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        stone: {
                            850: '#211f1d',
                            950: '#0c0a09',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #e7e5e4; 
        }
        .dark ::-webkit-scrollbar-track {
            background: #292524;
        }
        ::-webkit-scrollbar-thumb {
            background: #a8a29e; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #78716c; 
        }

        .chart-container {
            position: relative;
            width: 100%;
            height: 300px;
        }
        
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        .tab-active {
            border-bottom: 2px solid #0284c7;
            color: #0284c7;
            font-weight: 600;
        }

        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .terminal-window {
            background-color: #1e1e1e;
            color: #d4d4d4;
            border-radius: 8px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
        }

        .animate-fade-in {
            animation: fadeIn 0.4s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col bg-stone-50 text-stone-900 dark:bg-stone-950 dark:text-stone-100">

    <!-- Navigation Bar -->
    <nav class="bg-white dark:bg-stone-900 border-b border-stone-200 dark:border-stone-800 sticky top-0 z-50 transition-colors">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center cursor-pointer overflow-hidden" onclick="renderDashboard()">
                    <span class="text-xl sm:text-2xl mr-2">‚ò∏Ô∏è</span>
                    <span class="font-bold text-lg sm:text-xl tracking-tight text-stone-800 dark:text-stone-100 truncate">K8s Mastery</span>
                </div>
                <div class="flex items-center space-x-2 sm:space-x-4">
                    <button id="theme-toggle" class="p-2 rounded-lg bg-stone-100 dark:bg-stone-800 hover:bg-stone-200 dark:hover:bg-stone-700 transition-colors">
                        <span id="theme-toggle-icon">üåô</span>
                    </button>
                    <button onclick="renderDashboard()" class="text-stone-600 dark:text-stone-400 hover:text-sky-600 dark:hover:text-sky-400 font-medium transition-colors text-sm sm:text-base">Dashboard</button>
                    <div class="hidden xs:block text-xs sm:text-sm text-stone-500 font-mono" id="progress-display">Day 0/12</div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 w-full">
        <div id="app-view" class="w-full">
            <!-- Content injected via JS -->
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-stone-100 dark:bg-stone-900 border-t border-stone-200 dark:border-stone-800 mt-auto transition-colors">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center">
            <p class="text-stone-500 dark:text-stone-400 text-sm">Interactive 12-Day DevOps Job-Ready Plan</p>
        </div>
    </footer>

    <script>
       // --- Data Storage ---
        const k8sData = [
            {
                day: 1,
                title: "The Foundation - Architecture & Pods",
                domain: "Core",
                focus: "Understanding why K8s exists and the smallest unit of deployment.",
                concepts: [
                    "Container Orchestration: Managing the lifecycle of containers.",
                    "Control Plane: The 'brains' (API Server, Scheduler, etc.).",
                    "Worker Nodes: Where applications run.",
                    "Kube-apiserver: Entry point for REST commands.",
                    "Etcd: Distributed key-value store.",
                    "Kube-scheduler: Assigns pods to nodes.",
                    "Kube-controller-manager: Handles cluster functions.",
                    "Kubelet: Node agent ensuring containers run.",
                    "Kube-proxy: Host networking & load balancing.",
                    "Pod: Smallest deployable unit.",
                    "Sidecar Pattern: Helper container alongside main app.",
                    "YAML: Language for K8s objects.",
                    "Declarative vs Imperative: What vs. How.",
                    "Namespace: Virtual clusters.",
                    "Context: Cluster + User + Namespace.",
                    "Nodes: Physical/Virtual machines.",
                    "Container Runtime: Docker/containerd.",
                    "Minikube: Local K8s cluster.",
                    "Manifest: File describing desired state.",
                    "Desired State: K8s matching current to desired."
                ],
                tasks: [
                    "Install Minikube and Kubectl.",
                    "Start a Minikube cluster.",
                    "Check cluster status `kubectl cluster-info`.",
                    "Create namespace `dev-team`.",
                    "List all namespaces.",
                    "Run Nginx pod imperatively.",
                    "Create Nginx pod via YAML.",
                    "List pods in default namespace.",
                    "List pods in `dev-team`.",
                    "Describe pod lifecycle events.",
                    "View running pod logs.",
                    "Execute `ls` inside a pod.",
                    "Delete a pod manually.",
                    "Create multi-container pod (App+Logger).",
                    "Check specific container logs.",
                    "Get pod details in JSON.",
                    "Use `watch` to monitor status.",
                    "Delete all pods in namespace.",
                    "Set default namespace context.",
                    "Stop Minikube cluster."
                ],
                lab: {
                    title: "The 'Ghost' Pod",
                    scenario: "A developer created a pod manually, but it keeps disappearing after they delete it (or so they think). You need to prove that pods are ephemeral.",
                    steps: "Create a pod, write a temporary file to `/tmp`, delete the pod, and recreate it. Verify the file is gone. This reinforces that Pods are not persistent."
                },
                commands: [
                    { cmd: "kubectl run <name> --image=<image>", desc: "Create a pod" },
                    { cmd: "kubectl get pods", desc: "List pods" },
                    { cmd: "kubectl describe pod <name>", desc: "Deep dive into status" },
                    { cmd: "kubectl logs <name>", desc: "Fetch logs" },
                    { cmd: "kubectl delete pod <name>", desc: "Terminate pod" }
                ],
                resources: [
                    { name: "Kubernetes Basics", url: "https://kubernetes.io/docs/tutorials/kubernetes-basics/" },
                    { name: "K8s Architecture (Video)", url: "#" }
                ]
            },
            {
                day: 2,
                title: "Scaling & Self-Healing",
                domain: "Core",
                focus: "Moving from single pods to managed application groups (Deployments).",
                concepts: [
                    "ReplicaSet: Ensures specific pod replicas run.",
                    "Deployment: Manages ReplicaSets (Rollouts/Rollbacks).",
                    "Labels: Key-value pairs for ID.",
                    "Selectors: How controllers find pods.",
                    "Replicas: Desired count of instances.",
                    "Rolling Update: Gradual replacement of pods.",
                    "Recreate Strategy: Kill all then create new.",
                    "Rollback: Revert to previous version.",
                    "Revision History: Record of states.",
                    "Desired vs. Current vs. Ready: Status output.",
                    "Template: Pod spec inside Deployment.",
                    "Immutable Infrastructure: Replace, don't patch.",
                    "Self-Healing: ReplicaSet replaces dead pods.",
                    "Scaling Out: Increasing replicas.",
                    "Scaling In: Decreasing replicas.",
                    "Pause/Resume: Halting rollouts.",
                    "MaxSurge: Extra pods during update.",
                    "MaxUnavailable: Allowed down pods.",
                    "Annotate: Non-identifying metadata.",
                    "MatchLabels: Glue between Deployment/Pod."
                ],
                tasks: [
                    "Create Deployment (3 replicas, Nginx).",
                    "Scale to 5 replicas.",
                    "Delete a pod, watch recreation.",
                    "Update image version (v1 to v2).",
                    "Monitor rolling update.",
                    "Rollback to previous version.",
                    "Change strategy to Recreate.",
                    "Check rollout history.",
                    "Scale back to 1 replica.",
                    "Apply label to running pod.",
                    "Filter pods by label.",
                    "Pause deployment rollout.",
                    "Update while paused.",
                    "Resume rollout.",
                    "Edit replicas via `kubectl edit`.",
                    "Delete deployment, verify pods gone.",
                    "Create deployment from dry-run.",
                    "View ReplicaSets.",
                    "Identify active ReplicaSet.",
                    "Add annotation to deployment."
                ],
                lab: {
                    title: "The Failed Rollout",
                    scenario: "You deployed a new version, but the image name was misspelled. The rollout is stuck.",
                    steps: "Create a deployment with a non-existent image. Identify `ImagePullBackOff`. Roll back to the working version and verify cluster health."
                },
                commands: [
                    { cmd: "kubectl create deployment <name> ...", desc: "Create deployment" },
                    { cmd: "kubectl scale deployment ...", desc: "Scale replicas" },
                    { cmd: "kubectl rollout status ...", desc: "Watch updates" },
                    { cmd: "kubectl rollout undo ...", desc: "Rollback" },
                    { cmd: "kubectl get rs", desc: "View ReplicaSets" }
                ],
                resources: [
                    { name: "K8s Deployment Docs", url: "https://kubernetes.io/docs/concepts/workloads/controllers/deployment/" }
                ]
            },
            {
                day: 3,
                title: "Networking I - Services",
                domain: "Network",
                focus: "How pods talk to each other and the outside world.",
                concepts: [
                    "Service: Abstract way to expose app.",
                    "ClusterIP: Internal IP only (Default).",
                    "NodePort: Exposes on Node IP static port.",
                    "LoadBalancer: Uses cloud LB.",
                    "ExternalName: Maps to DNS name.",
                    "Endpoints: List of pod IPs targeted.",
                    "Kube-DNS/CoreDNS: Internal name resolution.",
                    "TargetPort: Port app listens on.",
                    "Port: Service exposed port.",
                    "NodePort Value: 30000-32767.",
                    "Selectors in Services: Finding target pods.",
                    "Service Discovery: Finding by name.",
                    "Session Affinity: Sticky sessions.",
                    "Headless Service: ClusterIP None.",
                    "Multi-Port Service: Exposing 80/8080.",
                    "TCP/UDP: Supported protocols.",
                    "IP Tables: Old traffic management.",
                    "IPVS: High-perf traffic management.",
                    "FQDN: svc.ns.svc.cluster.local.",
                    "Static IP: Stable IP for ephemeral pods."
                ],
                tasks: [
                    "Create ClusterIP for Nginx.",
                    "Try access ClusterIP from local (fail).",
                    "Curl service from temp pod.",
                    "Expose as NodePort.",
                    "Access via minikube service url.",
                    "Describe service (check Endpoints).",
                    "Scale app, watch Endpoints update.",
                    "Create service without selector.",
                    "Map external DB IP manually.",
                    "Test `nslookup` from pod.",
                    "Create LoadBalancer service.",
                    "Verify External IP.",
                    "Create multi-port service.",
                    "Change selector, watch traffic stop.",
                    "Port-forward to pod directly.",
                    "Port-forward to service.",
                    "Create Headless service.",
                    "Observe Headless DNS A records.",
                    "List all services.",
                    "Delete service, check pod survival."
                ],
                lab: {
                    title: "The Internal API",
                    scenario: "Frontend needs to talk to Backend. Cannot use IPs as they change.",
                    steps: "Deploy backend & frontend. Create ClusterIP for backend. Configure frontend to use backend's *service name*. Verify connectivity."
                },
                commands: [
                    { cmd: "kubectl expose deployment ...", desc: "Expose app" },
                    { cmd: "kubectl get svc", desc: "List services" },
                    { cmd: "kubectl get ep", desc: "View endpoints" },
                    { cmd: "kubectl port-forward ...", desc: "Local access" }
                ],
                resources: [
                    { name: "Service Concept", url: "https://kubernetes.io/docs/concepts/services-networking/service/" }
                ]
            },
            {
                day: 4,
                title: "Configuration - ConfigMaps & Secrets",
                domain: "Config",
                focus: "Decoupling code from configuration.",
                concepts: [
                    "ConfigMap: Non-sensitive config.",
                    "Secret: Sensitive data (tokens).",
                    "Base64 Encoding: Storage format (Not encryption!).",
                    "Env Variables: Injecting config.",
                    "Volume Mounts: Injecting config as files.",
                    "Key-Value Pairs: Data structure.",
                    "envFrom: Load all keys as envs.",
                    "secretKeyRef: Select specific key.",
                    "Immutable ConfigMaps: Prevent changes.",
                    "Opaque Secrets: Default arbitrary data.",
                    "docker-registry Secret: Private repos.",
                    "tls Secret: SSL certificates.",
                    "Hot Reloading: Vol mounts see changes.",
                    "Encryption at Rest: Etcd security.",
                    "Data Size Limit: 1MB.",
                    "SubPath: Mount single file.",
                    "Projected Volume: Combine sources.",
                    "External Secrets: Sync Vault/AWS.",
                    "Security Context: File permissions.",
                    "Binary Data: Storing binaries."
                ],
                tasks: [
                    "Create CM from literal.",
                    "Create CM from file.",
                    "Pod using CM as Env Var.",
                    "Pod mounting CM as Volume.",
                    "Create Opaque secret.",
                    "Base64 encode string manually.",
                    "Create Secret via YAML.",
                    "Mount secret as volume.",
                    "Verify file permissions inside.",
                    "Update CM, check volume update.",
                    "Update CM, check Env update (fail).",
                    "Create DB password secret.",
                    "Pass secret via envFrom.",
                    "Create .dockerconfigjson.",
                    "View secret YAML (decode).",
                    "Create CM from directory.",
                    "Use subPath for single file.",
                    "Delete secret, observe pod.",
                    "Annotate CM with version.",
                    "Create CM dry-run YAML."
                ],
                lab: {
                    title: "The Database Connection",
                    scenario: "WordPress app needs DB_HOST (ConfigMap) and DB_PASSWORD (Secret).",
                    steps: "Create required CM and Secret. Deploy pod printing these values or connecting to mock DB."
                },
                commands: [
                    { cmd: "kubectl create configmap ...", desc: "Create CM" },
                    { cmd: "kubectl create secret generic ...", desc: "Create Secret" },
                    { cmd: "kubectl get cm/secrets", desc: "List config" }
                ],
                resources: [
                    { name: "Configuring Pods", url: "https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/" }
                ]
            },
            {
                day: 5,
                title: "Storage - Volumes & Persistence",
                domain: "Storage",
                focus: "Handling data that must survive pod restarts.",
                concepts: [
                    "Volume: Directory accessible to pod.",
                    "PersistentVolume (PV): Admin storage.",
                    "PersistentVolumeClaim (PVC): User request.",
                    "StorageClass: Tiers & dynamic provisioning.",
                    "Static Provisioning: Manual PV.",
                    "Dynamic Provisioning: Auto PV via SC.",
                    "Access Modes: RWO, ROM, RWM.",
                    "Reclaim Policy: Retain/Delete/Recycle.",
                    "HostPath: Host node directory.",
                    "EmptyDir: Transient pod storage.",
                    "NFS: Network File System.",
                    "CSI: Third-party storage plugins.",
                    "Bound: PVC matched PV.",
                    "Pending: Waiting for PV.",
                    "Volume Binding Mode: When to bind.",
                    "Expand PV: Increasing size.",
                    "Local Storage: Node specific.",
                    "Selector/Labels: Matching PVC to PV.",
                    "Mount Propagation: Host/Container sharing.",
                    "Provisioner: Plugin creating storage."
                ],
                tasks: [
                    "Create emptyDir volume.",
                    "Create hostPath PV.",
                    "Create PVC requesting 1Gi.",
                    "Deploy pod mounting PVC.",
                    "Write file, kill pod, verify data.",
                    "List PVs and PVCs.",
                    "Inspect Bound status.",
                    "Create PVC larger than PV (Pending).",
                    "Create StorageClass.",
                    "Create PVC (Dynamic Provisioning).",
                    "Change Reclaim Policy to Retain.",
                    "Delete PVC, check PV exists.",
                    "Delete Retain PV manually.",
                    "Try ReadWriteMany on Minikube.",
                    "Check df -h inside pod.",
                    "Set storageClassName in PVC.",
                    "Create PVC with ROK access.",
                    "Describe PVC binding issues.",
                    "Pod with 2 different PVCs.",
                    "Clean up storage objects."
                ],
                lab: {
                    title: "Persistent Database",
                    scenario: "MySQL pod loses data on restart.",
                    steps: "Create PVC. Deploy MySQL with data dir mounted to PVC. Insert data, kill pod, verify data persistence."
                },
                commands: [
                    { cmd: "kubectl get pv/pvc/sc", desc: "List storage objects" },
                    { cmd: "kubectl describe pvc <name>", desc: "Troubleshoot" }
                ],
                resources: [
                    { name: "Storage Concepts", url: "https://kubernetes.io/docs/concepts/storage/" }
                ]
            },
            {
                day: 6,
                title: "Intermediate Workloads",
                domain: "Core",
                focus: "StatefulSets and Jobs (Databases and Tasks).",
                concepts: [
                    "StatefulSet: Unique identity pods.",
                    "Stable Network ID: web-0, web-1.",
                    "Ordinal Index: Numbering system.",
                    "Headless Service (SS): Discovery.",
                    "VolumeClaimTemplates: Unique storage per pod.",
                    "Job: Run to completion.",
                    "CronJob: Scheduled jobs.",
                    "Completions: Success count required.",
                    "Parallelism: Concurrent pods.",
                    "RestartPolicy: OnFailure/Never.",
                    "BackoffLimit: Retries before fail.",
                    "ActiveDeadlineSeconds: Max run time.",
                    "Schedule Syntax: * * * * *.",
                    "ConcurrencyPolicy: Overlap handling.",
                    "StartingDeadlineSeconds: Missed start.",
                    "SuccessfulJobsHistoryLimit: History.",
                    "OrderedReady: SS update strategy.",
                    "Parallel: SS start strategy.",
                    "Termination Grace Period: DB flush time.",
                    "Headless DNS: pod.svc.ns..."
                ],
                tasks: [
                    "Create StatefulSet (SS) 3 replicas.",
                    "Inspect pod names (0,1,2).",
                    "Create Headless service for SS.",
                    "Nslookup pod IPs.",
                    "Scale SS, watch order.",
                    "Delete SS pod, check name persistence.",
                    "Create Pi calculation Job.",
                    "Check Job logs/status.",
                    "Job with completions/parallelism.",
                    "Create 'Hello' CronJob.",
                    "View CronJob history.",
                    "Trigger Job from CronJob manually.",
                    "Suspend CronJob.",
                    "Set backoffLimit, force fail.",
                    "Observe retries.",
                    "SS with volumeClaimTemplate.",
                    "Verify unique PVCs.",
                    "Delete SS (PVCs remain).",
                    "Delete PVCs manually.",
                    "Patch CronJob schedule."
                ],
                lab: {
                    title: "Nightly Backup",
                    scenario: "Backup database every night at 2 AM.",
                    steps: "Create CronJob running a backup script. Test with * * * * * schedule first."
                },
                commands: [
                    { cmd: "kubectl get statefulset", desc: "List SS" },
                    { cmd: "kubectl get jobs/cronjobs", desc: "List Jobs" },
                    { cmd: "kubectl create job --from=cronjob/...", desc: "Manual trigger" }
                ],
                resources: [
                    { name: "Workloads", url: "https://kubernetes.io/docs/concepts/workloads/" }
                ]
            },
            {
                day: 7,
                title: "Networking II - Ingress",
                domain: "Network",
                focus: "Routing external HTTP/S traffic efficiently.",
                concepts: [
                    "Ingress: API for external access.",
                    "Ingress Controller: Implementation (Nginx).",
                    "Rules: Routing logic.",
                    "Host-based Routing: Domain routing.",
                    "Path-based Routing: URL path routing.",
                    "Default Backend: No match handler.",
                    "TLS Termination: SSL handling.",
                    "Annotations: Controller config.",
                    "Backend: Service + Port.",
                    "Ingress Class: Controller selection.",
                    "Fanout: One host, multiple paths.",
                    "Virtual Hosting: Multi hosts, one IP.",
                    "Rewrite Target: Modifying URL path.",
                    "ACME/Cert-Manager: Auto SSL.",
                    "Load Balancer Integration: Public IP.",
                    "Nginx Snippets: Custom config.",
                    "PathType: Prefix/Exact.",
                    "Connectivity: Client>LB>Ingress>Svc>Pod.",
                    "Wildcard DNS: *.example.com.",
                    "Basic Auth: Password protection."
                ],
                tasks: [
                    "Enable Minikube Ingress addon.",
                    "Create 2 deployments (A & B).",
                    "Create ClusterIPs for both.",
                    "Create Ingress (Path-based).",
                    "Map /etc/hosts for testing.",
                    "Test path routing via curl.",
                    "Create Ingress (Host-based).",
                    "Create self-signed TLS secret.",
                    "Secure Ingress with TLS.",
                    "Test HTTPS access.",
                    "Annotate HTTPS redirect.",
                    "Use rewrite-target.",
                    "Inspect controller logs.",
                    "Describe Ingress for errors.",
                    "Check Address field.",
                    "Create default backend.",
                    "Set ingressClassName.",
                    "Test PathType: Exact.",
                    "Create Basic Auth secret.",
                    "Apply Basic Auth annotation."
                ],
                lab: {
                    title: "The SaaS Portal",
                    scenario: "customer1.lab.com and customer2.lab.com point to same app.",
                    steps: "Setup host-based routing for two domains pointing to single backend. Verify routing."
                },
                commands: [
                    { cmd: "kubectl get ingress", desc: "List Ingress" },
                    { cmd: "kubectl describe ingress", desc: "Troubleshoot rules" },
                    { cmd: "kubectl get ingressclasses", desc: "Check controllers" }
                ],
                resources: [
                    { name: "Ingress Docs", url: "https://kubernetes.io/docs/concepts/services-networking/ingress/" }
                ]
            },
            {
                day: 8,
                title: "Security & Governance - RBAC",
                domain: "Security",
                focus: "Who can do what in the cluster?",
                concepts: [
                    "RBAC: Role-Based Access Control.",
                    "User: Human identity.",
                    "ServiceAccount: Pod identity.",
                    "Role: Namespace permissions.",
                    "ClusterRole: Cluster permissions.",
                    "RoleBinding: Attach Role to User.",
                    "ClusterRoleBinding: Attach ClusterRole.",
                    "Verbs: get, list, watch, create...",
                    "Resources: pods, deployments...",
                    "ApiGroups: apps, batch...",
                    "Least Privilege: Minimum access.",
                    "Impersonation: Testing auth.",
                    "Default SA: Namespace default.",
                    "AutomountToken: Disable token mount.",
                    "Subject: Who (User/Group/SA).",
                    "Admission Controllers: Validation.",
                    "SecurityContext: Pod security.",
                    "NetworkPolicies: Firewall rules.",
                    "Pod Security Standards: Baseline/Restricted.",
                    "Audit Logs: Activity tracking."
                ],
                tasks: [
                    "Create ServiceAccount (SA).",
                    "Create Role (get/list pods).",
                    "Bind Role to SA.",
                    "Check permissions `auth can-i`.",
                    "Pod using restricted SA.",
                    "Try delete from pod (fail).",
                    "Create ClusterRole (Secrets).",
                    "Create ClusterRoleBinding.",
                    "Verify cluster-wide access.",
                    "Create secure namespace.",
                    "Disable auto-mount token.",
                    "Role with multiple ApiGroups.",
                    "List RoleBindings.",
                    "Create Developer Group Role.",
                    "Test impersonation.",
                    "Edit RoleBinding.",
                    "Inspect SA token.",
                    "Create token manually.",
                    "SecurityContext (RunAsUser).",
                    "Run privileged pod (Risk)."
                ],
                lab: {
                    title: "The Intern's Access",
                    scenario: "Intern needs log view in staging, no delete, no secrets.",
                    steps: "Create namespace. Create Role/Binding satisfying constraints. Verify."
                },
                commands: [
                    { cmd: "kubectl auth can-i ...", desc: "Check permission" },
                    { cmd: "kubectl create sa ...", desc: "Create Account" },
                    { cmd: "kubectl get roles,rolebindings", desc: "List objects" }
                ],
                resources: [
                    { name: "RBAC Good Practices", url: "https://kubernetes.io/docs/reference/access-authn-authz/rbac/" }
                ]
            },
            {
                day: 9,
                title: "Resource Management & Autoscaling",
                domain: "Ops",
                focus: "Keeping apps healthy and cost-efficient.",
                concepts: [
                    "Requests: Minimum guaranteed.",
                    "Limits: Hard maximum.",
                    "CPU: Cores/millicores.",
                    "Memory: Bytes (Mi/Gi).",
                    "OOMKilled: Out of Memory.",
                    "CPU Throttling: Hit limit.",
                    "HPA: Horizontal Pod Autoscaler.",
                    "VPA: Vertical Pod Autoscaler.",
                    "Cluster Autoscaler: Node scaling.",
                    "Metrics Server: Data collector.",
                    "QoS: Guaranteed/Burstable/BestEffort.",
                    "LimitRange: Default ns limits.",
                    "ResourceQuota: Hard ns total.",
                    "Taints: Repel pods.",
                    "Tolerations: Allow on tainted.",
                    "Node Affinity: Prefer nodes.",
                    "Pod Anti-Affinity: Spread pods.",
                    "Drain: Evacuate node.",
                    "Cordon: Mark unschedulable.",
                    "PriorityClass: Scheduling priority."
                ],
                tasks: [
                    "Install Metrics Server.",
                    "Pod with Requests/Limits.",
                    "Check `kubectl top pods`.",
                    "Check `kubectl top nodes`.",
                    "Pod requesting too much (Pending).",
                    "Pod exceeding limit (OOMKilled).",
                    "Create HPA (CPU 50%).",
                    "Stress test pod.",
                    "Watch HPA scale up.",
                    "Stop stress, watch scale down.",
                    "Create ResourceQuota.",
                    "Exceed quota (Error).",
                    "Create LimitRange.",
                    "Deploy no-limit pod (Auto-assigned).",
                    "Cordon a node.",
                    "Drain a node.",
                    "Apply Taint to node.",
                    "Deploy pod (fail sched).",
                    "Add Toleration to pod.",
                    "Use NodeAffinity."
                ],
                lab: {
                    title: "Black Friday Prep",
                    scenario: "Huge traffic spike expected. Scale 2->20 replicas at 60% CPU.",
                    steps: "Setup HPA. Use load generator. Verify scaling."
                },
                commands: [
                    { cmd: "kubectl top pods", desc: "Usage metrics" },
                    { cmd: "kubectl cordon/drain <node>", desc: "Node ops" }
                ],
                resources: [
                    { name: "Resource Mgmt", url: "https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/" }
                ]
            },
            {
                day: 10,
                title: "Helm - The Package Manager",
                domain: "Ops",
                focus: "Managing complex apps with templates.",
                concepts: [
                    "Helm: K8s Package Manager.",
                    "Chart: The package.",
                    "Repo: Chart storage.",
                    "Release: Installed instance.",
                    "Values.yaml: Custom config.",
                    "Templates: YAML with logic.",
                    "helm install: Deploy.",
                    "helm upgrade: Update.",
                    "helm rollback: Revert.",
                    "helm list: Show releases.",
                    "Dry Run: Test install.",
                    "Chart.yaml: Metadata.",
                    "Dependencies: Sub-charts.",
                    "Library Charts: Reusable helpers.",
                    "Helm Lint: Best practices check.",
                    "Helm Uninstall: Remove.",
                    "Namespace Flag: Install location.",
                    "Set Flag: CLI overrides.",
                    "Release History: Timeline.",
                    "Built-in Objects: .Release.Name."
                ],
                tasks: [
                    "Install Helm.",
                    "Add Bitnami repo.",
                    "Search Nginx chart.",
                    "Install Nginx via Helm.",
                    "List releases.",
                    "Get release values.",
                    "Upgrade release (NodePort).",
                    "Rollback upgrade.",
                    "Uninstall release.",
                    "Create own chart.",
                    "Inspect structure.",
                    "Modify values.yaml.",
                    "Install local chart.",
                    "Dry-run debug.",
                    "Add custom template.",
                    "Pass value to ConfigMap.",
                    "Use Helm function.",
                    "Package chart (.tgz).",
                    "Install specific namespace.",
                    "View history."
                ],
                lab: {
                    title: "Multi-Environment Deploy",
                    scenario: "Deploy same app to dev, staging, prod with different replicas.",
                    steps: "Use one Helm chart but 3 values files. Deploy all 3 and verify."
                },
                commands: [
                    { cmd: "helm install <name> <chart>", desc: "Install" },
                    { cmd: "helm upgrade <name> <chart>", desc: "Update" },
                    { cmd: "helm list", desc: "View all" },
                    { cmd: "helm rollback <name> <rev>", desc: "Revert" }
                ],
                resources: [
                    { name: "Helm Docs", url: "https://helm.sh/docs/" }
                ]
            },
            {
                day: 11,
                title: "Monitoring, Logging & Troubleshooting",
                domain: "Ops",
                focus: "Finding and fixing issues in production.",
                concepts: [
                    "Liveness Probe: Restart if dead.",
                    "Readiness Probe: Traffic if ready.",
                    "Startup Probe: Slow start handling.",
                    "CrashLoopBackOff: Crash on start.",
                    "ImagePullBackOff: Image missing.",
                    "Pending: Scheduling issue.",
                    "Error: Failed start.",
                    "Terminating: Stuck shutdown.",
                    "Metrics Server: Resource data.",
                    "Prometheus: Metric collection.",
                    "Grafana: Visualization.",
                    "EFK/ELK: Log aggregation.",
                    "Sidecar Logger: Stream to stdout.",
                    "Events: Cluster history.",
                    "Describe: #1 Troubleshooting tool.",
                    "Port-forwarding: Debug access.",
                    "Ephemeral Debug Containers: Tool injection.",
                    "Node Logs: Syslog.",
                    "Audit Logs: Security trail.",
                    "Termination Message: Failure reason."
                ],
                tasks: [
                    "Failing Liveness probe.",
                    "Watch restart loop.",
                    "Create Readiness probe.",
                    "Break readiness, check traffic.",
                    "Cause CrashLoopBackOff.",
                    "Fix and recover.",
                    "Debug misspelled secret.",
                    "Logs --previous.",
                    "Get events sorted.",
                    "Debug Service no endpoints.",
                    "Exec network test.",
                    "Install Prometheus/Grafana.",
                    "View Dashboard.",
                    "Simulate node failure.",
                    "Use kubectl debug.",
                    "Check kubelet status.",
                    "Debug Ingress 503.",
                    "Debug RBAC Denied.",
                    "Check Usage vs Limits.",
                    "Clean up failed pods."
                ],
                lab: {
                    title: "The Silent Failure",
                    scenario: "App is slow. 1 of 5 pods is healthy, others crashing/not ready.",
                    steps: "Deploy 5 replicas, 2 programmed to fail readiness. Identify with `get pods` and `get ep`."
                },
                commands: [
                    { cmd: "kubectl logs --previous", desc: "Crash logs" },
                    { cmd: "kubectl get events", desc: "Cluster events" },
                    { cmd: "kubectl debug", desc: "Debug pod" }
                ],
                resources: [
                    { name: "Troubleshooting Guide", url: "https://kubernetes.io/docs/tasks/debug/" }
                ]
            },
            {
                day: 12,
                title: "CI/CD & Cloud Readiness",
                domain: "Advanced",
                focus: "Project day and interview prep.",
                concepts: [
                    "CI/CD: Continuous Integration/Deploy.",
                    "GitOps: Git as truth.",
                    "ArgoCD: Sync Git to K8s.",
                    "Blue/Green: Traffic switch.",
                    "Canary: % rollout.",
                    "IaC: Terraform/Pulumi.",
                    "Managed K8s: EKS/GKE/AKS.",
                    "Karpenter: Cloud scaling.",
                    "IRSA: Cloud permissions.",
                    "Cloud Controller: API Bridge.",
                    "VPC/Subnets: Networking.",
                    "Ingress (Cloud): ALB/GLB.",
                    "Image Registry: ECR/GCR.",
                    "Scanning: Vulnerabilities.",
                    "Cost Optimization: Spot instances.",
                    "Multi-cluster: Management.",
                    "Service Mesh: Istio.",
                    "Finalizers: Deletion blocks.",
                    "OwnerReferences: Hierarchy.",
                    "Kustomize: Manifest mgmt."
                ],
                tasks: [
                    "Create GitHub Repo.",
                    "Write Dockerfile.",
                    "GitHub Action Build/Push.",
                    "Create Helm Chart.",
                    "Deploy via Helm.",
                    "Setup Ingress.",
                    "Setup HPA.",
                    "Implement Readiness Probe.",
                    "Install ArgoCD (Optional).",
                    "Explain Pod Lifecycle.",
                    "Troubleshoot Pending.",
                    "Deployment vs StatefulSet.",
                    "Service Routing logic.",
                    "Securing a cluster."
                ],
                lab: {
                    title: "Final Hands-on Project",
                    scenario: "Build a full pipeline.",
                    steps: "From code to K8s with CI/CD, Ingress, and Scaling."
                },
                commands: [
                    { cmd: "N/A", desc: "Project Focus" }
                ],
                resources: [
                    { name: "Project Guides", url: "#" }
                ]
            }
        ];

        // State Management
        let currentState = {
            activeDay: null,
            completedDays: new Set(),
            theme: 'light'
        };

        // --- Core Logic ---

        function init() {
            initTheme();
            renderDashboard();
        }

        function initTheme() {
            const toggle = document.getElementById('theme-toggle');
            const icon = document.getElementById('theme-toggle-icon');
            
            // Check saved theme
            if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
                icon.textContent = '‚òÄÔ∏è';
                currentState.theme = 'dark';
            }

            toggle.addEventListener('click', () => {
                if (document.documentElement.classList.contains('dark')) {
                    document.documentElement.classList.remove('dark');
                    localStorage.theme = 'light';
                    icon.textContent = 'üåô';
                    currentState.theme = 'light';
                } else {
                    document.documentElement.classList.add('dark');
                    localStorage.theme = 'dark';
                    icon.textContent = '‚òÄÔ∏è';
                    currentState.theme = 'dark';
                }
                // Refresh charts on theme change for color consistency
                if (currentState.activeDay === null) renderDashboard();
            });
        }

        // Dashboard Renderer
        function renderDashboard() {
            currentState.activeDay = null;
            const app = document.getElementById('app-view');
            const totalConcepts = k8sData.reduce((acc, day) => acc + day.concepts.length, 0);
            const totalTasks = k8sData.reduce((acc, day) => acc + (day.tasks ? day.tasks.length : 0), 0);
            
            app.innerHTML = `
                <div class="mb-8 text-center animate-fade-in">
                    <h1 class="text-3xl sm:text-4xl font-bold text-stone-800 dark:text-stone-100 mb-2">Kubernetes 12-Day Journey</h1>
                    <p class="text-stone-600 dark:text-stone-400 max-w-2xl mx-auto px-4">Master architecture, networking, and operations through structured daily practice.</p>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-8">
                    <div class="bg-white dark:bg-stone-900 p-6 rounded-xl shadow-sm border border-stone-200 dark:border-stone-800">
                        <div class="text-sm text-stone-500 dark:text-stone-400 font-medium">Total Days</div>
                        <div class="text-3xl font-bold text-stone-800 dark:text-stone-100">12</div>
                        <div class="mt-2 h-2 bg-stone-100 dark:bg-stone-800 rounded-full overflow-hidden">
                            <div class="h-full bg-sky-500" style="width: ${Math.round((currentState.completedDays.size / 12) * 100)}%"></div>
                        </div>
                        <div class="text-xs text-stone-400 mt-1">${currentState.completedDays.size} completed</div>
                    </div>
                    <div class="bg-white dark:bg-stone-900 p-6 rounded-xl shadow-sm border border-stone-200 dark:border-stone-800">
                        <div class="text-sm text-stone-500 dark:text-stone-400 font-medium">Core Concepts</div>
                        <div class="text-3xl font-bold text-stone-800 dark:text-stone-100">${totalConcepts}</div>
                        <div class="text-xs text-stone-400 mt-1">Foundational knowledge</div>
                    </div>
                    <div class="hidden sm:block bg-white dark:bg-stone-900 p-6 rounded-xl shadow-sm border border-stone-200 dark:border-stone-800">
                        <div class="text-sm text-stone-500 dark:text-stone-400 font-medium">Hands-on Tasks</div>
                        <div class="text-3xl font-bold text-stone-800 dark:text-stone-100">${totalTasks}</div>
                        <div class="text-xs text-stone-400 mt-1">Practical exercises</div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8 mb-12">
                    <div class="bg-white dark:bg-stone-900 p-4 sm:p-6 rounded-xl shadow-sm border border-stone-200 dark:border-stone-800">
                        <h3 class="text-lg font-bold text-stone-800 dark:text-stone-100 mb-4 text-center sm:text-left">Daily Curriculum Balance</h3>
                        <div class="chart-container"><canvas id="curriculumChart"></canvas></div>
                    </div>
                    <div class="bg-white dark:bg-stone-900 p-4 sm:p-6 rounded-xl shadow-sm border border-stone-200 dark:border-stone-800">
                        <h3 class="text-lg font-bold text-stone-800 dark:text-stone-100 mb-4 text-center sm:text-left">Skill Domain Focus</h3>
                        <div class="chart-container"><canvas id="domainChart"></canvas></div>
                    </div>
                </div>

                <h2 class="text-2xl font-bold text-stone-800 dark:text-stone-100 mb-6 px-2">Your Learning Path</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-12">
                    ${k8sData.map(day => `
                        <div onclick="renderDay(${day.day})" 
                             class="bg-white dark:bg-stone-900 p-5 rounded-lg border ${currentState.completedDays.has(day.day) ? 'border-sky-500 bg-sky-50 dark:bg-sky-950/20' : 'border-stone-200 dark:border-stone-800'} shadow-sm card-hover cursor-pointer transition-all">
                            <div class="flex justify-between items-start mb-2">
                                <span class="text-xs font-bold uppercase tracking-wider ${currentState.completedDays.has(day.day) ? 'text-sky-600' : 'text-stone-400'}">Day ${day.day}</span>
                                ${currentState.completedDays.has(day.day) ? '‚úÖ' : ''}
                            </div>
                            <h4 class="font-bold text-stone-800 dark:text-stone-100 mb-2 leading-tight">${day.title}</h4>
                            <div class="mt-4 flex items-center gap-2">
                                <span class="px-2 py-1 bg-stone-100 dark:bg-stone-800 text-stone-600 dark:text-stone-400 text-xs rounded font-medium">${day.domain}</span>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            initCharts();
            updateNavProgress();
        }

        function initCharts() {
            const isDark = document.documentElement.classList.contains('dark');
            const textColor = isDark ? '#a8a29e' : '#78716c';
            const gridColor = isDark ? '#292524' : '#e7e5e4';

            const ctx1 = document.getElementById('curriculumChart').getContext('2d');
            new Chart(ctx1, {
                type: 'bar',
                data: {
                    labels: k8sData.map(d => `D${d.day}`),
                    datasets: [
                        { label: 'Concepts', data: k8sData.map(d => d.concepts.length), backgroundColor: isDark ? '#44403c' : '#e7e5e4' },
                        { label: 'Tasks', data: k8sData.map(d => d.tasks ? d.tasks.length : 0), backgroundColor: '#0ea5e9' }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { labels: { color: textColor } } },
                    scales: {
                        x: { stacked: true, grid: { display: false }, ticks: { color: textColor } },
                        y: { stacked: true, grid: { color: gridColor }, ticks: { color: textColor } }
                    }
                }
            });

            const domains = {};
            k8sData.forEach(d => domains[d.domain] = (domains[d.domain] || 0) + 1);
            const ctx2 = document.getElementById('domainChart').getContext('2d');
            new Chart(ctx2, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(domains),
                    datasets: [{
                        data: Object.values(domains),
                        backgroundColor: ['#78716c', '#0ea5e9', '#f59e0b', '#10b981', '#6366f1'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '65%',
                    plugins: { legend: { position: 'right', labels: { color: textColor, padding: 20 } } }
                }
            });
        }

        function renderDay(dayId) {
            currentState.activeDay = dayId;
            const dayData = k8sData.find(d => d.day === dayId);
            const app = document.getElementById('app-view');
            const isCompleted = currentState.completedDays.has(dayId);

            app.innerHTML = `
                <div class="mb-6 flex flex-col md:flex-row justify-between md:items-center gap-4 animate-fade-in">
                    <div>
                        <button onclick="renderDashboard()" class="text-sm text-stone-500 dark:text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 mb-2 flex items-center gap-1">‚Üê Back</button>
                        <h2 class="text-2xl sm:text-3xl font-bold text-stone-900 dark:text-stone-100">Day ${dayData.day}: ${dayData.title}</h2>
                    </div>
                    <div class="flex items-center gap-3">
                        <button onclick="toggleComplete(${dayId})" 
                            class="w-full md:w-auto px-4 py-2 rounded-lg font-medium transition-colors ${isCompleted ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 border border-green-200 dark:border-green-800' : 'bg-stone-800 text-white dark:bg-stone-100 dark:text-stone-900 hover:bg-stone-700 dark:hover:bg-stone-200'}">
                            ${isCompleted ? 'Completed ‚úì' : 'Mark as Complete'}
                        </button>
                    </div>
                </div>

                <div class="flex border-b border-stone-200 dark:border-stone-800 mb-8 overflow-x-auto no-scrollbar">
                    ${['Concepts', 'Tasks', 'Lab Scenario', 'Commands'].map(tab => `
                        <button onclick="switchTab('${tab}')" 
                            id="tab-${tab.replace(' ', '')}"
                            class="px-4 sm:px-6 py-3 text-sm font-medium text-stone-500 dark:text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors whitespace-nowrap ${tab === 'Concepts' ? 'tab-active' : ''}">
                            ${tab}
                        </button>
                    `).join('')}
                </div>

                <div id="tab-content" class="min-h-[300px] animate-fade-in">
                    ${getConceptsHTML(dayData)}
                </div>
            `;
            updateNavProgress();
        }

        function getConceptsHTML(data) {
            return `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    ${data.concepts.map((concept, index) => {
                        const parts = concept.split(':');
                        return `
                        <div class="bg-white dark:bg-stone-900 p-4 rounded-lg border border-stone-200 dark:border-stone-800 shadow-sm transition-colors">
                            <span class="text-xs font-mono text-stone-400 dark:text-stone-500 block mb-1">#${index + 1}</span>
                            <h4 class="font-bold text-stone-800 dark:text-stone-100 mb-1">${parts[0]}</h4>
                            <p class="text-sm text-stone-600 dark:text-stone-400">${parts[1] || ''}</p>
                        </div>`;
                    }).join('')}
                </div>`;
        }

        function getTasksHTML(data) {
            if (!data.tasks) return `<p class="text-stone-500">No tasks listed for this day.</p>`;
            return `
                 <div class="bg-white dark:bg-stone-900 rounded-xl shadow-sm border border-stone-200 dark:border-stone-800 overflow-hidden">
                    <div class="p-4 sm:p-6 bg-stone-50 dark:bg-stone-850 border-b border-stone-200 dark:border-stone-800">
                        <h3 class="font-bold text-stone-800 dark:text-stone-100">Hands-on Checklist</h3>
                    </div>
                    <div class="divide-y divide-stone-100 dark:divide-stone-800">
                        ${data.tasks.map((task, index) => `
                            <label class="flex items-start gap-4 p-4 hover:bg-stone-50 dark:hover:bg-stone-800/50 cursor-pointer transition-colors">
                                <input type="checkbox" class="mt-1 w-4 h-4 text-sky-600 rounded border-stone-300 dark:border-stone-700 bg-transparent focus:ring-sky-500">
                                <div class="text-sm sm:text-base text-stone-600 dark:text-stone-300">${task}</div>
                            </label>`).join('')}
                    </div>
                </div>`;
        }

        function getLabHTML(data) {
            return `
                <div class="max-w-4xl mx-auto">
                    <div class="bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-900/30 rounded-xl p-6">
                        <div class="flex items-center gap-2 mb-4">
                            <span class="text-2xl">‚ö°</span>
                            <h3 class="text-xl font-bold text-amber-900 dark:text-amber-400">${data.lab.title}</h3>
                        </div>
                        <p class="text-amber-900 dark:text-amber-300/80 mb-6 leading-relaxed">${data.lab.scenario}</p>
                        <div class="bg-white dark:bg-stone-900/50 p-4 rounded-lg border border-amber-100 dark:border-amber-900/20 text-amber-900 dark:text-amber-300">
                            <strong>Steps:</strong> ${data.lab.steps}
                        </div>
                    </div>
                </div>`;
        }

        function getCommandsHTML(data) {
            return `
                <div class="terminal-window p-4 sm:p-6 font-mono text-xs sm:text-sm overflow-x-auto">
                    <div class="flex gap-2 mb-4">
                        <div class="w-3 h-3 rounded-full bg-red-500"></div>
                        <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                        <div class="w-3 h-3 rounded-full bg-green-500"></div>
                    </div>
                    <div class="space-y-4">
                        ${data.commands.map(c => `
                            <div>
                                <div class="text-stone-500 mb-1"># ${c.desc}</div>
                                <div class="text-green-400 flex"><span class="mr-2">$</span><span>${c.cmd}</span></div>
                            </div>`).join('')}
                    </div>
                </div>`;
        }

        window.switchTab = function(tabName) {
            document.querySelectorAll('button[id^="tab-"]').forEach(b => b.classList.remove('tab-active'));
            document.getElementById(`tab-${tabName.replace(' ', '')}`).classList.add('tab-active');
            const dayData = k8sData.find(d => d.day === currentState.activeDay);
            const contentDiv = document.getElementById('tab-content');
            if (tabName === 'Concepts') contentDiv.innerHTML = getConceptsHTML(dayData);
            if (tabName === 'Tasks') contentDiv.innerHTML = getTasksHTML(dayData);
            if (tabName === 'Lab Scenario') contentDiv.innerHTML = getLabHTML(dayData);
            if (tabName === 'Commands') contentDiv.innerHTML = getCommandsHTML(dayData);
        };

        window.toggleComplete = function(dayId) {
            currentState.completedDays.has(dayId) ? currentState.completedDays.delete(dayId) : currentState.completedDays.add(dayId);
            renderDay(dayId);
        };

        window.updateNavProgress = function() {
             const display = document.getElementById('progress-display');
             if(display) display.textContent = `Day ${currentState.activeDay || 0}/12`;
        }

        window.renderDashboard = renderDashboard;
        window.renderDay = renderDay;

        init();
    </script>
</body>
</html>
